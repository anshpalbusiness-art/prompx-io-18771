import{r as t,x as _,j as e,h as E,i as L,k as P,l as T,m as F,S as D,B as k}from"./index-C2MjUc6j.js";import{L as l}from"./label-CPXGueWk.js";import{S as n,a as i,b as c,c as o,d}from"./select-JOWFLGTk.js";import{s as g}from"./index-z1pI4DUj.js";import{U as V,f as H}from"./Layout-lstxxF2Q.js";const O=({userId:h,onPreferencesUpdate:m})=>{const[s,a]=t.useState({niche:"",style:"",preferred_tone:"",preferred_length:"moderate"}),[v,p]=t.useState(!1),[f,x]=t.useState(!1),{toast:u}=_();t.useEffect(()=>{y()},[h]);const y=async()=>{p(!0);try{const{data:r,error:j}=await g.from("user_preferences").select("*").eq("user_id",h).maybeSingle();if(j)throw j;r&&a({niche:r.niche||"",style:r.style||"",preferred_tone:r.preferred_tone||"",preferred_length:r.preferred_length||"moderate"})}catch(r){console.error("Error loading preferences:",r)}finally{p(!1)}},S=async()=>{x(!0);try{const{error:r}=await g.from("user_preferences").upsert({user_id:h,...s});if(r)throw r;u({title:"âœ… Preferences Saved!",description:"PromptX will now personalize prompts based on your profile"}),m==null||m(s)}catch(r){u({title:"Error Saving Preferences",description:r.message,variant:"destructive"})}finally{x(!1)}},C=["Trading & Finance","Marketing & Sales","Software Development","Healthcare","Education","E-commerce","Legal","Content Creation","Design & Art","Data Science","Other"],N=["Professional","Casual","Technical","Creative","Academic","Conversational"],b=["Formal","Friendly","Authoritative","Empathetic","Persuasive","Informative"],w=[{value:"brief",label:"Brief & Concise"},{value:"moderate",label:"Moderate Detail"},{value:"detailed",label:"Comprehensive & Detailed"}];return e.jsxs(E,{className:"bg-gradient-to-br from-background to-secondary/5 border-primary/20",children:[e.jsxs(L,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5 text-primary"}),e.jsx(P,{children:"User Profile & Preferences"})]}),e.jsx(T,{children:"Customize PromptX to learn your style and generate hyper-personalized prompts"})]}),e.jsx(F,{className:"space-y-4",children:v?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Loading preferences..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"niche",className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-primary"}),"Your Niche / Industry"]}),e.jsxs(n,{value:s.niche,onValueChange:r=>a({...s,niche:r}),children:[e.jsx(i,{children:e.jsx(c,{placeholder:"Select your industry..."})}),e.jsx(o,{children:C.map(r=>e.jsx(d,{value:r.toLowerCase().replace(/\s+/g,"-"),children:r},r))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"style",children:"Writing Style"}),e.jsxs(n,{value:s.style,onValueChange:r=>a({...s,style:r}),children:[e.jsx(i,{children:e.jsx(c,{placeholder:"Select your preferred style..."})}),e.jsx(o,{children:N.map(r=>e.jsx(d,{value:r.toLowerCase(),children:r},r))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"tone",children:"Preferred Tone"}),e.jsxs(n,{value:s.preferred_tone,onValueChange:r=>a({...s,preferred_tone:r}),children:[e.jsx(i,{children:e.jsx(c,{placeholder:"Select your preferred tone..."})}),e.jsx(o,{children:b.map(r=>e.jsx(d,{value:r.toLowerCase(),children:r},r))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"length",children:"Prompt Length"}),e.jsxs(n,{value:s.preferred_length,onValueChange:r=>a({...s,preferred_length:r}),children:[e.jsx(i,{children:e.jsx(c,{placeholder:"Select preferred length..."})}),e.jsx(o,{children:w.map(r=>e.jsx(d,{value:r.value,children:r.label},r.value))})]})]}),e.jsxs(k,{onClick:S,disabled:f,className:"w-full",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),f?"Saving...":"Save Preferences"]})]})})]})};export{O as U};
