import{r as a,j as e,h as b,i as N,k as v,S as A,m as w,B as h,s as I,q as T,o as C,n as L}from"./index-C2MjUc6j.js";import{s as f}from"./index-z1pI4DUj.js";import{L as E}from"./Layout-lstxxF2Q.js";import{T as F}from"./textarea-BKVa-xUV.js";import{S as M}from"./scroll-area-BY2TyNKv.js";import{S as H}from"./send-Bprvxut_.js";import"./index-C0NKCsYR.js";import"./index-BOT--vBY.js";import"./index-BdQq_4o_.js";const R=()=>{const[o,d]=a.useState([{role:"assistant",content:"Hi! I'm your AI Prompt Co-Pilot. Let's build the perfect prompt together. What would you like to create a prompt for?"}]),[n,m]=a.useState(""),[c,u]=a.useState(!1),[t,l]=a.useState(""),[P,g]=a.useState(!1),p=a.useRef(null);a.useEffect(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},[o]);const j=async()=>{if(!n.trim()||c)return;const s={role:"user",content:n};d(r=>[...r,s]),m(""),u(!0);try{const r=o.map(i=>`${i.role==="user"?"User":"Assistant"}: ${i.content}`).join(`
`),x=await f.functions.invoke("execute-claude",{body:{prompt:`${r}
User: ${n}`,systemPrompt:"You are an AI Prompt Co-Pilot. Help users build better prompts through conversation. Ask clarifying questions and guide them to create effective prompts.",model:"claude-sonnet-4-5",temperature:.7,maxTokens:4e3}});if(x.error)throw x.error;const y=x.data.result;if(o.length>4){const i=y.match(/FINAL_PROMPT:\s*([\s\S]+)/);i&&l(i[1].trim())}d(i=>[...i,{role:"assistant",content:y}]),u(!1)}catch(r){console.error("Error:",r),C.error(r instanceof Error?r.message:"Failed to send message"),u(!1)}},S=()=>{t&&(navigator.clipboard.writeText(t),g(!0),C.success("Prompt copied to clipboard!"),setTimeout(()=>g(!1),2e3))},k=()=>{d([{role:"assistant",content:"Hi! I'm your AI Prompt Co-Pilot. Let's build the perfect prompt together. What would you like to create a prompt for?"}]),l(""),m("")};return e.jsx("div",{className:"space-y-4",children:e.jsxs(b,{children:[e.jsx(N,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-primary"}),"AI Co-Pilot Mode"]})}),e.jsxs(w,{className:"space-y-4",children:[e.jsx(M,{ref:p,className:"h-[400px] w-full rounded-md border p-4",children:e.jsxs("div",{className:"space-y-4",children:[o.map((s,r)=>e.jsx("div",{className:`flex ${s.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] rounded-lg px-4 py-2 ${s.role==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:e.jsx("p",{className:"whitespace-pre-wrap text-sm",children:s.content.replace(/FINAL_PROMPT:\s*/g,"")})})},r)),c&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted max-w-[80%] rounded-lg px-4 py-2",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-foreground/50"}),e.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-foreground/50 [animation-delay:0.2s]"}),e.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-foreground/50 [animation-delay:0.4s]"})]})})})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{value:n,onChange:s=>m(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),j())},placeholder:"Type your response...",className:"min-h-[60px] resize-none",disabled:c}),e.jsx(h,{onClick:j,disabled:!n.trim()||c,size:"icon",className:"h-[60px] w-[60px]",children:e.jsx(H,{className:"h-4 w-4"})})]}),t&&e.jsxs(b,{className:"border-primary/20 bg-primary/5",children:[e.jsx(N,{children:e.jsxs(v,{className:"flex items-center justify-between text-base",children:[e.jsx("span",{children:"Final Prompt"}),e.jsx(h,{onClick:S,variant:"ghost",size:"sm",className:"gap-2",children:P?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"h-4 w-4"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"h-4 w-4"}),"Copy"]})})]})}),e.jsx(w,{children:e.jsx("p",{className:"whitespace-pre-wrap text-sm",children:t})})]}),e.jsx(h,{onClick:k,variant:"outline",className:"w-full",children:"Start New Conversation"})]})]})})},_=()=>{const o=L(),[d,n]=a.useState(null),[m,c]=a.useState(!0);return a.useEffect(()=>{const{data:{subscription:u}}=f.auth.onAuthStateChange((t,l)=>{n((l==null?void 0:l.user)??null),l||o("/auth")});return f.auth.getSession().then(({data:{session:t}})=>{n((t==null?void 0:t.user)??null),t||o("/auth"),c(!1)}),()=>u.unsubscribe()},[o]),m?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx("div",{className:"animate-pulse-subtle",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary/20 border-t-primary rounded-full animate-spin"})})}):e.jsx(E,{user:d,showHeader:!1,children:e.jsx("div",{className:"w-full min-h-screen bg-gradient-to-b from-background via-background to-muted/20",children:e.jsxs("div",{className:"container-responsive mx-auto max-w-6xl py-8 sm:py-12 md:py-16 lg:py-20",children:[e.jsxs("div",{className:"mb-6 sm:mb-8 md:mb-10 lg:mb-12 space-y-2 sm:space-y-3 md:space-y-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-foreground leading-tight",children:"AI Co-Pilot"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl text-muted-foreground max-w-2xl leading-relaxed",children:"Get intelligent assistance for crafting perfect prompts"})]}),e.jsx("div",{className:"w-full",children:e.jsx(R,{})})]})})})};export{_ as default};
