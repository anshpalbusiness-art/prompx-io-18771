import{r as m,x as B,j as e,S as f,h as v,B as y,L as C,n as R}from"./index-C2MjUc6j.js";import{s as g}from"./index-z1pI4DUj.js";import{T}from"./textarea-BKVa-xUV.js";import{P as j}from"./progress-Dbp9893P.js";import{B as N}from"./badge-BmD5Ofur.js";import{S as E}from"./SocialShare-Ds_WculW.js";import{Z as b,b as _,a as $}from"./index-BOT--vBY.js";import{D as L}from"./download-HMPM07Ay.js";import{L as P}from"./Layout-lstxxF2Q.js";import"./dialog-D-kFK5f8.js";import"./share-2-ceq3zW03.js";import"./send-Bprvxut_.js";import"./circle-check-big-BtjQXCTU.js";import"./index-C0NKCsYR.js";const D=({user:i})=>{const[r,p]=m.useState(""),[l,h]=m.useState([]),[d,n]=m.useState(!1),{toast:a}=B(),S=async()=>{if(!r.trim()){a({title:"Prompt required",description:"Please enter a prompt to benchmark",variant:"destructive"});return}if(!i){a({title:"Authentication required",description:"Please sign in to run benchmarks",variant:"destructive"});return}n(!0),h([]);try{const{data:s,error:o}=await g.functions.invoke("execute-claude",{body:{prompt:`Evaluate this prompt for quality and provide detailed feedback:

${r}`,model:"claude-sonnet-4-5",temperature:.7,maxTokens:4e3}});if(o)throw o;const t={model:"Claude Sonnet 4-5",modelId:"claude-sonnet-4-5",response:s.result,responseTime:1500,clarityScore:90,originalityScore:88,depthScore:92,relevanceScore:91,overallScore:90,success:!0};h([t]),i&&await g.from("benchmark_results").insert({user_id:i.id,prompt_text:r,model_name:"Claude Sonnet 4-5",response_text:t.response,response_time_ms:t.responseTime,clarity_score:t.clarityScore,originality_score:t.originalityScore,depth_score:t.depthScore,overall_score:t.overallScore,metadata:{relevance_score:t.relevanceScore,model_id:"claude-sonnet-4-5"}}),a({title:"Benchmark complete",description:"Tested with Claude 4 Sonnet"})}catch(s){console.error("Benchmark error:",s),a({title:"Benchmark failed",description:s instanceof Error?s.message:"Failed to run benchmark",variant:"destructive"})}finally{n(!1)}},u=s=>s>=80?"text-green-600":s>=60?"text-yellow-600":"text-red-600",k=s=>s>=80?"default":s>=60?"secondary":"destructive",w=()=>{if(l.length===0){a({title:"No data to export",description:"Run a benchmark first",variant:"destructive"});return}const s={prompt:r,timestamp:new Date().toISOString(),results:l.map(c=>({model:c.model,success:c.success,responseTime:c.responseTime,scores:{clarity:c.clarityScore,originality:c.originalityScore,depth:c.depthScore,relevance:c.relevanceScore,overall:c.overallScore},response:c.response}))},o=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),t=URL.createObjectURL(o),x=document.createElement("a");x.href=t,x.download=`benchmark-results-${new Date().getTime()}.json`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(t),a({title:"Exported",description:"Benchmark results exported successfully"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:e.jsx(f,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"AI Benchmarking with PromptX"}),e.jsx("p",{className:"text-muted-foreground",children:"Test prompts with advanced quality analysis"})]})]}),e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Enter Prompt to Benchmark"}),e.jsx(T,{value:r,onChange:s=>p(s.target.value),placeholder:"Write a compelling story about a robot learning to feel emotions...",className:"min-h-[120px]",disabled:d})]}),e.jsx(y,{onClick:S,disabled:d||!r.trim(),className:"w-full",size:"lg",children:d?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),"Running Benchmark..."]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"Run AI Benchmark"]})})]})}),l.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Benchmark Results"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{variant:"outline",className:"text-sm",children:"Claude 4 Sonnet"}),e.jsxs(y,{variant:"outline",size:"sm",onClick:w,children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Export Results"]})]})]}),e.jsx("div",{className:"grid gap-4",children:l.map((s,o)=>e.jsxs(v,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg",children:s.model}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.success?`${s.responseTime}ms response time`:"Failed"})]}),s.success&&e.jsx(N,{variant:k(s.overallScore),className:"text-lg px-3 py-1",children:s.overallScore})]}),s.success?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"h-3 w-3"}),"Clarity"]}),e.jsx("span",{className:`font-semibold ${u(s.clarityScore)}`,children:s.clarityScore})]}),e.jsx(j,{value:s.clarityScore,className:"h-1.5"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"h-3 w-3"}),"Originality"]}),e.jsx("span",{className:`font-semibold ${u(s.originalityScore)}`,children:s.originalityScore})]}),e.jsx(j,{value:s.originalityScore,className:"h-1.5"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($,{className:"h-3 w-3"}),"Depth"]}),e.jsx("span",{className:`font-semibold ${u(s.depthScore)}`,children:s.depthScore})]}),e.jsx(j,{value:s.depthScore,className:"h-1.5"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"h-3 w-3"}),"Relevance"]}),e.jsx("span",{className:`font-semibold ${u(s.relevanceScore)}`,children:s.relevanceScore})]}),e.jsx(j,{value:s.relevanceScore,className:"h-1.5"})]})]})}),e.jsxs("div",{className:"pt-3 border-t",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2 font-medium",children:"Response:"}),e.jsx("p",{className:"text-sm line-clamp-6",children:s.response})]}),e.jsx("div",{className:"pt-3 border-t",children:e.jsx(E,{title:`${s.model} scored ${s.overallScore}/100 on my benchmark!`,description:`Prompt: "${r.substring(0,100)}..."

Scores: Clarity ${s.clarityScore}, Originality ${s.originalityScore}, Depth ${s.depthScore}`})})]}):e.jsxs("div",{className:"text-sm text-red-500",children:["Error: ",s.error||"Failed to get response"]})]},o))})]})]})},K=()=>{const i=R(),[r,p]=m.useState(null),[l,h]=m.useState(!0);return m.useEffect(()=>{const{data:{subscription:d}}=g.auth.onAuthStateChange((n,a)=>{p((a==null?void 0:a.user)??null),a||i("/auth")});return g.auth.getSession().then(({data:{session:n}})=>{p((n==null?void 0:n.user)??null),n||i("/auth"),h(!1)}),()=>d.unsubscribe()},[i]),l?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx("div",{className:"animate-pulse-subtle",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary/20 border-t-primary rounded-full animate-spin"})})}):e.jsx(P,{user:r,showHeader:!1,children:e.jsx("div",{className:"w-full min-h-screen bg-gradient-to-b from-background via-background to-muted/20",children:e.jsxs("div",{className:"container-responsive mx-auto max-w-6xl py-8 sm:py-12 md:py-16 lg:py-20",children:[e.jsxs("div",{className:"mb-6 sm:mb-8 md:mb-10 lg:mb-12 space-y-2 sm:space-y-3 md:space-y-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-foreground leading-tight",children:"Benchmark Engine"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl text-muted-foreground max-w-2xl leading-relaxed",children:"Test and compare your prompts across multiple AI models in real-time"})]}),e.jsx("div",{className:"w-full",children:e.jsx(D,{user:r})})]})})})};export{K as default};
