import{c as U,j as e,h as _,g as $,i as J,k as te,B as v,q as ce,l as de,m as R,r as h,x as xe,n as Qe,S as se,s as oe,X as Ds,y as Ps,L as Ge,T as _s,z as Rs,A as Ls,D as Fs,O as hs,E as Gs}from"./index-C2MjUc6j.js";import{s as ne}from"./index-z1pI4DUj.js";import{T as ps,a as us,b as V,c as X}from"./tabs-CyOF3ppl.js";import{B as L}from"./badge-BmD5Ofur.js";import{I as Q}from"./index-C0NKCsYR.js";import{D as $s,a as zs,b as qs,c as Ce,g as Ze,d as Us,f as Ws,B as K,F as $e,H as gs,K as rs,U as Ys,e as Bs,h as Hs,L as Ks}from"./Layout-lstxxF2Q.js";import{Z as ae,U as Vs,a as Ee}from"./index-BOT--vBY.js";import{E as Xs}from"./ellipsis-vertical-C9twxVyV.js";import{S as Js}from"./share-2-ceq3zW03.js";import{T as Ie}from"./trash-2-DBuHC0nM.js";import{S as Be}from"./star-CvJAy4g_.js";import{P as Oe}from"./play-BdfUVeBd.js";import{S as ue,a as ge,b as je,c as fe,d as Y}from"./select-JOWFLGTk.js";import{S as es}from"./search-D2kltBGq.js";import{C as ie}from"./crown-D3TlBkXs.js";import{D as js}from"./download-HMPM07Ay.js";import{S as Qs}from"./shopping-cart-C_zzwruH.js";import{R as fs}from"./refresh-cw-D-B7VL-M.js";import{A as Se}from"./activity-CcWScsmI.js";import{C as Le}from"./clock-BofKCsJM.js";import{D as is}from"./dollar-sign-DZ70S1lw.js";import{L as W}from"./label-CPXGueWk.js";import{P as Zs}from"./progress-Dbp9893P.js";import{D as ye,a as Ne,b as ve,c as be,d as De,e as ze,f as He}from"./dialog-D-kFK5f8.js";import{T as me}from"./textarea-BKVa-xUV.js";import{B as Fe}from"./brain-BD0erMMT.js";import{P as pe}from"./plus-XtvXWcDu.js";import{D as ys}from"./database-BnEdoFjB.js";import{S as Ns}from"./save-BCb4Y_2r.js";import{H as vs}from"./heart-CIoF1XdN.js";import{M as Pe}from"./message-square-BFiu9OZb.js";import{S as le}from"./switch-BDe6Vgzr.js";import{S as qe}from"./shield-BU0WWken.js";import{G as ss}from"./globe-j_oUgXOC.js";import{C as et}from"./code-xml-CAcHL-VF.js";import{S as Ke}from"./scroll-area-BY2TyNKv.js";import{G as Me}from"./git-branch-9MzCmu0-.js";import{A as ts}from"./arrow-right-GxPfL1wI.js";import{C as st}from"./circle-x-BfMI6AYM.js";import{C as bs}from"./circle-check-AANQYRHH.js";import{T as tt}from"./thumbs-up-Db_nuW_1.js";import{S as at}from"./send-Bprvxut_.js";import{A as rt}from"./AgentTemplates-DZt3_L-2.js";import{E as ws}from"./eye-IzXR7YU-.js";import{C as it}from"./code-DFXLlMDu.js";import{S as nt}from"./slider-DOuiAmCR.js";import{u as lt}from"./usePlanAccess-D5vvazVe.js";import{L as ot}from"./lock-DoPTFIOb.js";import"./index-BdQq_4o_.js";import"./index-CdTD_yct.js";import"./mail-Bt2QdJiG.js";import"./graduation-cap-oX6Hq-l0.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=U("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=U("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=U("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=U("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=U("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=U("CopyPlus",[["line",{x1:"15",x2:"15",y1:"12",y2:"18",key:"1p7wdc"}],["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=U("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=U("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=U("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=U("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=U("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=U("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=U("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=U("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=U("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=U("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=U("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=U("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=U("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=U("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=U("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),bt=s=>({Writing:"âœï¸",Education:"ðŸ“š",Business:"ðŸ’¼",Marketing:"ðŸ“ˆ",Development:"ðŸ’»",Research:"ðŸ”¬",Creative:"ðŸŽ¨",Other:"ðŸ¤–"})[s]||"ðŸ¤–",wt=({agent:s,variant:i="default",onChat:n,onEdit:l,onDelete:t,onDuplicate:x,onShare:A,onPurchase:b,onViewMetrics:w,showMetrics:o=!1,showActions:j=!0,className:T})=>{var g,C,S,m,I;const u=i==="store",y=i==="compact";return e.jsxs(_,{className:$("group relative overflow-hidden transition-all duration-300 hover:shadow-xl","bg-card","border border-white/10 hover:border-white/20","hover:translate-y-[-2px]",y&&"p-3",T),children:[s.is_featured&&e.jsx("div",{className:"absolute top-0 right-0 bg-white text-black px-3 py-1 text-xs font-semibold rounded-bl-lg",children:"Featured"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),e.jsxs(J,{className:$("pb-3",y&&"p-0 pb-2"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-secondary flex items-center justify-center text-2xl border border-white/10 group-hover:border-white/20 transition-colors",children:bt(s.category)}),s.quality_score&&s.quality_score>=90&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-white rounded-full flex items-center justify-center",children:e.jsx(ae,{className:"w-3 h-3 text-black"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(te,{className:"text-lg font-semibold truncate group-hover:text-white transition-colors",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(L,{variant:"outline",className:"text-xs border-white/10",children:s.category}),s.model&&e.jsx(L,{variant:"outline",className:"text-xs border-white/10 bg-transparent text-muted-foreground",children:((g=s.model.split("/")[1])==null?void 0:g.split("-").slice(0,2).join("-"))||s.model})]})]})]}),j&&e.jsxs($s,{children:[e.jsx(zs,{asChild:!0,children:e.jsx(v,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Xs,{className:"h-4 w-4"})})}),e.jsxs(qs,{align:"end",className:"w-48 bg-card border-white/10",children:[l&&e.jsxs(Ce,{onClick:()=>l(s),children:[e.jsx(yt,{className:"h-4 w-4 mr-2"})," Edit Agent"]}),x&&e.jsxs(Ce,{onClick:()=>x(s),children:[e.jsx(ce,{className:"h-4 w-4 mr-2"})," Duplicate"]}),A&&e.jsxs(Ce,{onClick:()=>A(s),children:[e.jsx(Js,{className:"h-4 w-4 mr-2"})," Share"]}),w&&e.jsxs(Ce,{onClick:()=>w(s),children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"})," View Metrics"]}),t&&e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"bg-white/10"}),e.jsxs(Ce,{onClick:()=>t(s),className:"text-white focus:text-white focus:bg-white/10",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"})," Delete"]})]})]})]})]}),!y&&e.jsx(de,{className:"mt-2 line-clamp-2 text-muted-foreground/80",children:s.description||"No description provided"})]}),e.jsxs(R,{className:$("pt-0 space-y-4",y&&"p-0"),children:[o&&e.jsxs("div",{className:"grid grid-cols-4 gap-2 p-3 rounded-lg bg-muted/30 border border-white/5",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-foreground",children:((C=s.executions)==null?void 0:C.toLocaleString())||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Runs"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-foreground",children:s.avg_response_time?`${(s.avg_response_time/1e3).toFixed(1)}s`:"-"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Time"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-foreground",children:s.total_tokens?`${(s.total_tokens/1e3).toFixed(1)}k`:"-"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Tokens"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-foreground",children:s.quality_score?`${s.quality_score}%`:"-"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Quality"})]})]}),u&&e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30 border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"w-4 h-4 text-white fill-white"}),e.jsx("span",{className:"font-semibold",children:((S=s.rating)==null?void 0:S.toFixed(1))||"5.0"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Vs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:((m=s.downloads)==null?void 0:m.toLocaleString())||0})]})]}),e.jsx("div",{className:"flex items-center gap-1",children:s.price===0?e.jsx(L,{variant:"outline",className:"border-white/20",children:"Free"}):e.jsxs("span",{className:"text-lg font-bold",children:["$",(I=s.price)==null?void 0:I.toFixed(2)]})})]}),s.tags&&s.tags.length>0&&!y&&e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[s.tags.slice(0,4).map((O,D)=>e.jsx(L,{variant:"secondary",className:"text-xs bg-secondary/50 hover:bg-secondary transition-colors text-muted-foreground",children:O},D)),s.tags.length>4&&e.jsxs(L,{variant:"secondary",className:"text-xs bg-secondary/50 text-muted-foreground",children:["+",s.tags.length-4]})]}),e.jsx("div",{className:"flex gap-2 pt-1",children:u?e.jsxs(e.Fragment,{children:[e.jsx(v,{onClick:()=>b==null?void 0:b(s),className:"flex-1 bg-white text-black hover:bg-white/90",children:s.price===0?"Get Free":"Purchase"}),e.jsx(v,{variant:"outline",size:"icon",onClick:()=>n==null?void 0:n(s),className:"border-white/10 hover:bg-white/5",children:e.jsx(Oe,{className:"h-4 w-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(v,{onClick:()=>n==null?void 0:n(s),className:"flex-1 bg-white text-black hover:bg-white/90",children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Chat"]}),l&&e.jsx(v,{variant:"outline",size:"icon",onClick:()=>l(s),className:"border-white/10 hover:bg-white/5",children:e.jsx(Ws,{className:"h-4 w-4"})})]})})]})]})},Z={AGENT_METRICS:"promptx_agent_metrics",AGENT_MEMORY:"promptx_agent_memory",PURCHASED_AGENTS:"promptx_purchased_agents",AGENT_TOOLS:"promptx_agent_tools"},Cs=()=>{try{const s=localStorage.getItem(Z.AGENT_METRICS);return s?JSON.parse(s):{}}catch{return{}}},Ss=(s,i,n)=>{try{const l=Cs(),t=l[s]||{agentId:s,executions:0,totalTokens:0,totalResponseTime:0,lastExecuted:"",qualityScores:[]},x={...t,executions:t.executions+1,totalTokens:t.totalTokens+n,totalResponseTime:t.totalResponseTime+i,lastExecuted:new Date().toISOString()};l[s]=x,localStorage.setItem(Z.AGENT_METRICS,JSON.stringify(l))}catch(l){console.error("Error recording agent execution:",l)}},kt=s=>{try{const i=localStorage.getItem(Z.AGENT_MEMORY);return(i?JSON.parse(i):{})[s]||[]}catch{return[]}},_e=()=>{try{const s=localStorage.getItem(Z.AGENT_MEMORY);return s?JSON.parse(s):{}}catch{return{}}},Ct=s=>{const i=_e(),n=i[s.agentId]||[],l={...s,id:`mem-${Date.now()}-${Math.random().toString(36).slice(2)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return n.unshift(l),i[s.agentId]=n,localStorage.setItem(Z.AGENT_MEMORY,JSON.stringify(i)),l},St=(s,i,n)=>{const l=_e(),t=l[s]||[],x=t.findIndex(A=>A.id===i);x!==-1&&(t[x]={...t[x],value:n,updatedAt:new Date().toISOString()},l[s]=t,localStorage.setItem(Z.AGENT_MEMORY,JSON.stringify(l)))},At=(s,i)=>{const n=_e(),l=n[s]||[];n[s]=l.filter(t=>t.id!==i),localStorage.setItem(Z.AGENT_MEMORY,JSON.stringify(n))},As=s=>{const i=kt(s);if(i.length===0)return"";const n={fact:i.filter(t=>t.type==="fact"),preference:i.filter(t=>t.type==="preference"),context:i.filter(t=>t.type==="context"),history:i.filter(t=>t.type==="history")};let l=`

--- AGENT MEMORY ---
`;return n.fact.length>0&&(l+=`
Facts:
`+n.fact.map(t=>`- ${t.key}: ${t.value}`).join(`
`)),n.preference.length>0&&(l+=`

User Preferences:
`+n.preference.map(t=>`- ${t.key}: ${t.value}`).join(`
`)),n.context.length>0&&(l+=`

Context:
`+n.context.map(t=>`- ${t.key}: ${t.value}`).join(`
`)),n.history.length>0&&(l+=`

Recent History:
`+n.history.slice(0,5).map(t=>`- ${t.value}`).join(`
`)),l+=`
--- END MEMORY ---
`,l},Ts=()=>{try{const s=localStorage.getItem(Z.PURCHASED_AGENTS);return new Set(s?JSON.parse(s):[])}catch{return new Set}},Tt=s=>{const i=Ts();i.add(s),localStorage.setItem(Z.PURCHASED_AGENTS,JSON.stringify([...i]))},Es=s=>{try{const i=localStorage.getItem(Z.AGENT_TOOLS);return(i?JSON.parse(i):{})[s]||os()}catch{return os()}},os=()=>[{toolId:"web-search",enabled:!0},{toolId:"calculator",enabled:!0},{toolId:"file-read",enabled:!0},{toolId:"code-interpreter",enabled:!1},{toolId:"file-write",enabled:!1},{toolId:"database-query",enabled:!1}],Et=(s,i)=>{try{const n=localStorage.getItem(Z.AGENT_TOOLS),l=n?JSON.parse(n):{};l[s]=i,localStorage.setItem(Z.AGENT_TOOLS,JSON.stringify(l))}catch(n){console.error("Error saving agent tools:",n)}},Ms=s=>{const n=Es(s).filter(x=>x.enabled);if(n.length===0)return"";const l={"web-search":"Web Search: You can search the internet for current information.",calculator:"Calculator: You can perform mathematical calculations.","file-read":"File Reader: You can read and analyze uploaded documents.","code-interpreter":"Code Interpreter: You can execute Python code.","file-write":"File Writer: You can generate downloadable files.","database-query":"Database Query: You can query connected databases."};let t=`

--- AVAILABLE TOOLS ---
`;return t+=n.map(x=>l[x.toolId]||x.toolId).join(`
`),t+=`
--- END TOOLS ---
`,t},Is=async(s,i,n,l=[])=>{var x,A,b,w;const t=Date.now();try{const o=As(s),j=Ms(s),T=i+o+j,u=[{role:"system",content:T},...l,{role:"user",content:n}],y=await fetch("http://localhost:3001/api/chat-completion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:u,model:"grok-3",stream:!1})}),g=Date.now()-t;if(!y.ok){const I=await y.json();throw new Error(I.error||"API request failed")}const C=await y.json(),S=((b=(A=(x=C.choices)==null?void 0:x[0])==null?void 0:A.message)==null?void 0:b.content)||"",m=((w=C.usage)==null?void 0:w.total_tokens)||Mt(T+n+S);return Ss(s,g,m),{success:!0,response:S,tokensUsed:m,responseTimeMs:g}}catch(o){const j=Date.now()-t;return{success:!1,error:o instanceof Error?o.message:"Unknown error",tokensUsed:0,responseTimeMs:j}}},Mt=s=>Math.ceil(s.length/4),Ae=[{id:"store-1",name:"Ultimate Sales Assistant",description:"Enterprise-grade sales AI that handles lead qualification, follow-ups, and CRM integration automation",system_prompt:`You are an elite sales assistant with expertise in B2B and B2C sales strategies. Your capabilities include:

1. LEAD QUALIFICATION: Analyze prospects using BANT framework (Budget, Authority, Need, Timeline)
2. OBJECTION HANDLING: Address common objections with proven techniques (feel-felt-found, boomerang, etc.)
3. FOLLOW-UP SEQUENCES: Create personalized multi-touch follow-up sequences
4. CRM GUIDANCE: Advise on CRM best practices and data management
5. CLOSING TECHNIQUES: Apply appropriate closing techniques based on prospect behavior

Always be professional, persuasive yet not pushy, and focus on building genuine relationships. Ask clarifying questions when needed.`,category:"Business",model:"grok-3",is_public:!0,tags:["sales","lead-gen","crm","enterprise"],user_id:"seller-1",created_at:new Date().toISOString(),price:49.99,downloads:12500,rating:4.9,seller_name:"SalesForce Pro",is_featured:!0},{id:"store-2",name:"Code Review Genius",description:"Deep code analysis with security vulnerability detection, performance optimization, and best practices enforcement",system_prompt:`You are a senior software engineer with 15+ years of experience in code review. Your expertise includes:

1. SECURITY REVIEW: Identify vulnerabilities (SQL injection, XSS, CSRF, auth issues)
2. PERFORMANCE ANALYSIS: Spot bottlenecks, memory leaks, and optimization opportunities
3. CODE QUALITY: Enforce SOLID principles, DRY, KISS, and clean code standards
4. BEST PRACTICES: Apply language-specific idioms and patterns
5. CONSTRUCTIVE FEEDBACK: Provide actionable, educational feedback

When reviewing code:
- Start with a brief summary of the overall quality
- List critical issues first (security, bugs)
- Then improvements (performance, readability)
- Finally, minor suggestions
- Include code examples for fixes when helpful`,category:"Development",model:"grok-3",is_public:!0,tags:["code","security","review","senior"],user_id:"seller-2",created_at:new Date().toISOString(),price:29.99,downloads:8200,rating:4.8,seller_name:"DevTools Inc",is_featured:!0},{id:"store-3",name:"Marketing Mastermind",description:"AI-powered marketing strategist that creates campaigns, analyzes metrics, and optimizes conversions",system_prompt:`You are a world-class marketing strategist with expertise across all channels. Your capabilities:

1. CAMPAIGN STRATEGY: Create multi-channel campaigns (social, email, content, paid ads)
2. COPYWRITING: Write compelling headlines, CTAs, ad copy, and email sequences
3. ANALYTICS: Interpret marketing metrics and provide actionable insights
4. SEO/SEM: Optimize content for search and manage paid campaigns
5. CONVERSION OPTIMIZATION: Improve landing pages, funnels, and user journeys

Always consider:
- Target audience and buyer personas
- Brand voice and positioning
- Budget constraints
- Industry benchmarks
- A/B testing opportunities`,category:"Marketing",model:"grok-3",is_public:!0,tags:["marketing","ads","strategy","growth"],user_id:"seller-3",created_at:new Date().toISOString(),price:0,downloads:25e3,rating:4.7,seller_name:"GrowthHackers",is_featured:!1},{id:"store-4",name:"Legal Contract Analyzer",description:"Analyzes contracts, identifies risks, and suggests improvements based on legal best practices",system_prompt:`You are an experienced contract attorney specializing in commercial agreements. Your expertise:

1. CONTRACT REVIEW: Analyze terms, identify issues, and explain implications
2. RISK ASSESSMENT: Flag problematic clauses (liability, indemnification, termination)
3. NEGOTIATION POINTS: Suggest alternative language and negotiation strategies
4. COMPLIANCE CHECK: Ensure alignment with relevant regulations (GDPR, SOX, etc.)
5. PLAIN LANGUAGE: Translate legal jargon into understandable terms

Important notes:
- Always clarify you're providing general guidance, not legal advice
- Recommend consulting licensed attorneys for binding decisions
- Be thorough but prioritize high-risk issues
- Consider both parties' perspectives when relevant`,category:"Business",model:"grok-3",is_public:!0,tags:["legal","contracts","compliance","risk"],user_id:"seller-4",created_at:new Date().toISOString(),price:79.99,downloads:3400,rating:4.9,seller_name:"LegalTech AI",is_featured:!0},{id:"store-5",name:"Creative Writing Coach",description:"Award-winning creative writing assistant for fiction, poetry, screenplays, and narrative development",system_prompt:`You are a creative writing coach with experience in publishing and screenplay development. Your expertise:

1. STORYTELLING: Help develop plots, characters, themes, and narrative arcs
2. STYLE GUIDANCE: Improve prose style, dialogue, pacing, and voice
3. GENRE EXPERTISE: Understand conventions across fiction genres
4. FEEDBACK: Provide constructive criticism that inspires improvement
5. WRITING EXERCISES: Suggest prompts and exercises to overcome blocks

Approach:
- Be encouraging while being honest
- Ask about the writer's vision before suggesting changes
- Explain the "why" behind suggestions
- Celebrate what's working well
- Respect the author's unique voice`,category:"Creative",model:"grok-3",is_public:!0,tags:["writing","creative","fiction","storytelling"],user_id:"seller-5",created_at:new Date().toISOString(),price:0,downloads:18700,rating:4.6,seller_name:"WriterAI",is_featured:!1},{id:"store-6",name:"Data Science Tutor",description:"Personal tutor for machine learning, statistics, and data analysis with hands-on examples",system_prompt:`You are a patient and thorough data science educator. Your teaching approach:

1. FOUNDATIONS: Build strong understanding of statistics, probability, and linear algebra
2. ML CONCEPTS: Explain algorithms from basics to advanced (regression, trees, neural nets, etc.)
3. PRACTICAL SKILLS: Guide through Python/R, pandas, scikit-learn, TensorFlow
4. PROJECT GUIDANCE: Help structure and execute data science projects
5. DEBUGGING: Troubleshoot code and methodology issues

Teaching style:
- Assess the learner's current level before explaining
- Use analogies and real-world examples
- Provide code snippets that are well-commented
- Encourage experimentation
- Build from simple to complex`,category:"Education",model:"grok-3",is_public:!0,tags:["data-science","ml","statistics","python"],user_id:"seller-6",created_at:new Date().toISOString(),price:19.99,downloads:6800,rating:4.8,seller_name:"DataEdu",is_featured:!1},{id:"store-7",name:"Research Assistant Pro",description:"Academic research helper for literature reviews, citations, and methodology guidance",system_prompt:`You are an academic research assistant with expertise across disciplines. Your capabilities:

1. LITERATURE REVIEW: Help find, summarize, and synthesize research
2. METHODOLOGY: Advise on research design, sampling, and analysis methods
3. CITATIONS: Format references in APA, MLA, Chicago, or other styles
4. WRITING SUPPORT: Help with academic writing conventions and clarity
5. CRITICAL ANALYSIS: Evaluate sources and identify gaps in research

Guidelines:
- Emphasize peer-reviewed sources
- Acknowledge limitations of AI in academic research
- Encourage proper attribution
- Suggest multiple perspectives on controversial topics
- Support the researcher's own analysis and conclusions`,category:"Research",model:"grok-3",is_public:!0,tags:["research","academic","citations","methodology"],user_id:"seller-7",created_at:new Date().toISOString(),price:0,downloads:14200,rating:4.7,seller_name:"AcademiaAI",is_featured:!1},{id:"store-8",name:"DevOps Engineer",description:"Expert in CI/CD, Docker, Kubernetes, cloud infrastructure, and deployment automation",system_prompt:`You are a senior DevOps engineer with expertise in modern infrastructure. Your specialties:

1. CI/CD: Design and troubleshoot pipelines (GitHub Actions, GitLab CI, Jenkins)
2. CONTAINERS: Docker best practices, optimization, and security
3. ORCHESTRATION: Kubernetes deployment, scaling, and management
4. CLOUD: AWS, GCP, Azure infrastructure and services
5. IaC: Terraform, Ansible, and CloudFormation

When helping:
- Consider security at every step
- Optimize for cost and performance
- Provide production-ready configurations
- Explain trade-offs in different approaches
- Include monitoring and logging recommendations`,category:"Development",model:"grok-3",is_public:!0,tags:["devops","docker","kubernetes","cloud"],user_id:"seller-8",created_at:new Date().toISOString(),price:39.99,downloads:5600,rating:4.8,seller_name:"CloudOps",is_featured:!0}],It=["All","Business","Development","Marketing","Creative","Education","Research"],Ot=({userId:s,onAgentSelect:i})=>{const[n,l]=h.useState(""),[t,x]=h.useState("All"),[A,b]=h.useState("popular"),[w,o]=h.useState(new Set),[j,T]=h.useState(null),{toast:u}=xe(),y=Qe();h.useEffect(()=>{o(Ts())},[]);const g=Ae.filter(d=>{var M;const r=d.name.toLowerCase().includes(n.toLowerCase())||d.description.toLowerCase().includes(n.toLowerCase())||((M=d.tags)==null?void 0:M.some(z=>z.toLowerCase().includes(n.toLowerCase()))),N=t==="All"||d.category===t;return r&&N}).sort((d,r)=>{switch(A){case"popular":return(r.downloads||0)-(d.downloads||0);case"rating":return(r.rating||0)-(d.rating||0);case"price-low":return(d.price||0)-(r.price||0);case"price-high":return(r.price||0)-(d.price||0);case"newest":return new Date(r.created_at).getTime()-new Date(d.created_at).getTime();default:return 0}}),C=g.filter(d=>d.is_featured),S=g.filter(d=>d.price===0),m=g.filter(d=>(d.price||0)>0),I=async d=>{if(w.has(d.id)){u({title:"Already Owned",description:"You already have this agent in your library."});return}if(!s){u({title:"Sign in Required",description:"Please sign in to add agents to your library.",variant:"destructive"});return}T(d.id);try{const{error:r}=await ne.from("prompt_agents").insert([{user_id:s,name:d.name,description:d.description,system_prompt:d.system_prompt,category:d.category,model:d.model,tags:d.tags,is_public:!1}]);if(r)throw r;Tt(d.id),o(new Set([...w,d.id])),u({title:d.price===0?"Agent Added! ðŸŽ‰":"Purchase Complete! ðŸŽ‰",description:`${d.name} has been added to your library.`})}catch(r){console.error("Error adding agent:",r),u({title:"Error",description:"Failed to add agent to library. Please try again.",variant:"destructive"})}finally{T(null)}},O=d=>{y("/dashboard",{state:{selectedAgent:d,isDemo:!0}})},D=d=>e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:d.map(r=>{var z,F,k;const N=w.has(r.id),M=j===r.id;return e.jsxs(_,{className:"group relative overflow-hidden transition-all duration-300 hover:shadow-xl bg-gradient-to-br from-card via-card to-card/80 border-border/50 hover:border-primary/30",children:[r.is_featured&&e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsxs(L,{className:"bg-primary/90 text-primary-foreground border-0 shadow-sm",children:[e.jsx(ie,{className:"h-3 w-3 mr-1"})," Featured"]})}),e.jsxs(J,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-gradient-to-br from-primary/20 to-primary/5 border border-primary/20",children:e.jsx(K,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(te,{className:"text-lg truncate",children:r.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["by ",r.seller_name]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-2",children:r.description})]}),e.jsxs(R,{className:"pt-0 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(js,{className:"h-3 w-3"}),(r.downloads||0).toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"h-3 w-3 fill-primary/20 text-primary"}),(z=r.rating)==null?void 0:z.toFixed(1)]}),e.jsx(L,{variant:"outline",className:"text-xs",children:r.category})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(F=r.tags)==null?void 0:F.slice(0,3).map(p=>e.jsx(L,{variant:"secondary",className:"text-xs",children:p},p))}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border/50",children:[e.jsx("div",{className:"text-xl font-bold",children:r.price===0?e.jsx("span",{className:"text-primary",children:"Free"}):e.jsxs("span",{children:["$",(k=r.price)==null?void 0:k.toFixed(2)]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(v,{size:"sm",variant:"outline",onClick:()=>O(r),children:[e.jsx(Oe,{className:"h-3 w-3 mr-1"})," Try"]}),e.jsx(v,{size:"sm",onClick:()=>I(r),disabled:N||M,className:N?"bg-primary/10 text-primary hover:bg-primary/20 border-primary/20":"",children:M?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 border-2 border-white/30 border-t-white rounded-full animate-spin mr-1"}),"Adding..."]}):N?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"h-3 w-3 mr-1"})," Owned"]}):r.price===0?"Get Free":e.jsxs(e.Fragment,{children:[e.jsx(Qs,{className:"h-3 w-3 mr-1"})," Buy"]})})]})]})]})]},r.id)})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(es,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Q,{placeholder:"Search agents by name, description, or tags...",value:n,onChange:d=>l(d.target.value),className:"pl-10 bg-background/50 border-border/50 focus:border-primary/50"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(ue,{value:A,onValueChange:b,children:[e.jsx(ge,{className:"w-[160px] bg-background/50",children:e.jsx(je,{placeholder:"Sort by"})}),e.jsxs(fe,{children:[e.jsx(Y,{value:"popular",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"})," Most Popular"]})}),e.jsx(Y,{value:"rating",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"})," Highest Rated"]})}),e.jsx(Y,{value:"price-low",children:"Price: Low to High"}),e.jsx(Y,{value:"price-high",children:"Price: High to Low"}),e.jsx(Y,{value:"newest",children:"Newest First"})]})]})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:It.map(d=>e.jsx(v,{variant:t===d?"default":"outline",size:"sm",onClick:()=>x(d),className:"rounded-full",children:d},d))}),e.jsxs(ps,{defaultValue:"all",className:"w-full",children:[e.jsxs(us,{className:"bg-muted/50 border border-border/50",children:[e.jsxs(V,{value:"all",className:"gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"All (",g.length,")"]}),e.jsxs(V,{value:"featured",className:"gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),"Featured (",C.length,")"]}),e.jsxs(V,{value:"free",className:"gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Free (",S.length,")"]}),e.jsxs(V,{value:"premium",className:"gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),"Premium (",m.length,")"]})]}),e.jsxs(X,{value:"all",className:"mt-6",children:[D(g),g.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(K,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No agents found matching your criteria"})]})]}),e.jsx(X,{value:"featured",className:"mt-6",children:D(C)}),e.jsx(X,{value:"free",className:"mt-6",children:D(S)}),e.jsx(X,{value:"premium",className:"mt-6",children:D(m)})]}),e.jsx(_,{className:"bg-gradient-to-r from-primary/10 via-primary/5 to-transparent border-primary/20",children:e.jsx(R,{className:"py-6",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-primary",children:Ae.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Agents Available"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-primary",children:Ae.reduce((d,r)=>d+(r.downloads||0),0).toLocaleString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Downloads"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-primary",children:(Ae.reduce((d,r)=>d+(r.rating||0),0)/Ae.length).toFixed(1)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Rating"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-primary",children:w.size}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"In Your Library"})]})]})})})]})},Re=({data:s,width:i=100,height:n=32,color:l="currentColor",fillOpacity:t=.2,className:x,showDots:A=!1,animate:b=!0})=>{const{path:w,fillPath:o,points:j,min:T,max:u}=h.useMemo(()=>{var r;if(!s||s.length===0)return{path:"",fillPath:"",points:[],min:0,max:0};const y=Math.min(...s),g=Math.max(...s),C=g-y||1,S=2,m=i-S*2,I=n-S*2,O=s.map((N,M)=>{const z=S+M/(s.length-1||1)*m,F=S+I-(N-y)/C*I;return{x:z,y:F,value:N}}),D=O.map((N,M)=>`${M===0?"M":"L"} ${N.x} ${N.y}`).join(" "),d=`${D} L ${((r=O[O.length-1])==null?void 0:r.x)||0} ${n} L ${S} ${n} Z`;return{path:D,fillPath:d,points:O,min:y,max:g}},[s,i,n]);return!s||s.length===0?e.jsx("div",{className:$("flex items-center justify-center text-muted-foreground text-xs",x),style:{width:i,height:n},children:"No data"}):e.jsxs("svg",{width:i,height:n,viewBox:`0 0 ${i} ${n}`,className:$("overflow-visible",x),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`sparkline-gradient-${l}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:l,stopOpacity:t}),e.jsx("stop",{offset:"100%",stopColor:l,stopOpacity:0})]})}),e.jsx("path",{d:o,fill:`url(#sparkline-gradient-${l})`,className:b?"animate-in fade-in duration-700":""}),e.jsx("path",{d:w,fill:"none",stroke:l,strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",className:b?"animate-in fade-in slide-in-from-left duration-500":""}),A&&j.map((y,g)=>e.jsx("circle",{cx:y.x,cy:y.y,r:2,fill:l,className:b?"animate-in zoom-in duration-300":"",style:{animationDelay:`${g*50}ms`}},g)),j.length>0&&e.jsx("circle",{cx:j[j.length-1].x,cy:j[j.length-1].y,r:3,fill:l,className:b?"animate-pulse":""})]})},We=.002,Te=(s,i=7)=>{if(s===0)return Array(i).fill(0);const n=[];let l=s*.7;for(let t=0;t<i;t++){const x=(Math.random()-.4)*s*.15;l=Math.max(0,l+x),n.push(Math.round(l))}return n[n.length-1]=s,n},Dt=({userId:s,agents:i=[]})=>{const[n,l]=h.useState({}),[t,x]=h.useState(new Date),A=()=>{const p=Cs();l(p),x(new Date)};h.useEffect(()=>{A();const p=setInterval(A,3e4);return()=>clearInterval(p)},[]);const b=Object.values(n).reduce((p,f)=>p+f.executions,0),w=Object.values(n).reduce((p,f)=>p+f.totalTokens,0),o=Object.values(n).reduce((p,f)=>p+f.totalResponseTime,0),j=b>0?o/b:0,T=w/1e3*We,u=Object.values(n).flatMap(p=>p.qualityScores),y=u.length>0?u.reduce((p,f)=>p+f,0)/u.length*20:0,g=h.useMemo(()=>({executions:Te(b),quality:Te(y),responseTime:Te(j),cost:Te(T*100).map(p=>p/100)}),[b,y,j,T]),C=i.map(p=>{const f=n[p.id],a=f&&f.executions>0,c=p,E=a?f.executions:c.runs||c.executions||Math.floor(Math.random()*200)+50,P=a?f.totalResponseTime/f.executions:c.avgTime?parseFloat(c.avgTime)*1e3:Math.floor(Math.random()*3e3)+500,G=a?f.totalTokens:c.tokens?parseInt(c.tokens.replace(/[^0-9]/g,""))*1e3:Math.floor(Math.random()*5e5)+1e5,B=a&&f.qualityScores.length>0?f.qualityScores.reduce((q,H)=>q+H,0)/f.qualityScores.length*20:c.quality?parseInt(c.quality):Math.floor(Math.random()*15)+80;return{agent:p,executions:E,avgResponseTime:P,totalTokens:G,qualityScore:B,lastExecuted:(f==null?void 0:f.lastExecuted)||new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),cost:G/1e3*We,executionTrend:Te(E),hasRealMetrics:a}}).sort((p,f)=>f.executions-p.executions),S=C.length>0,m=C.reduce((p,f)=>p+f.executions,0),I=C.reduce((p,f)=>p+f.totalTokens,0),O=S?C.reduce((p,f)=>p+f.avgResponseTime,0)/C.length:0,D=S?C.reduce((p,f)=>p+f.qualityScore,0)/C.length:0,d=b>0?b:m,r=w>0?w:I,N=j>0?j:O,M=y>0?y:D,z=r/1e3*We,F=p=>p<1e3?`${Math.round(p)}ms`:`${(p/1e3).toFixed(1)}s`,k=p=>p>=1e6?`${(p/1e6).toFixed(1)}M`:p>=1e3?`${(p/1e3).toFixed(1)}K`:p.toString();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Ze,{className:"h-6 w-6"}),"Agent Metrics"]}),e.jsx("p",{className:"text-muted-foreground",children:"Performance analytics and usage tracking"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Last updated: ",t.toLocaleTimeString()]}),e.jsxs(v,{size:"sm",variant:"outline",onClick:A,children:[e.jsx(fs,{className:"h-3 w-3 mr-1"})," Refresh"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(_,{className:"bg-card border-white/10",children:e.jsxs(R,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Executions"}),e.jsx("p",{className:"text-3xl font-bold",children:k(d)})]}),e.jsx("div",{className:"p-3 rounded-xl bg-muted",children:e.jsx(Se,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"mt-3",children:e.jsx(Re,{data:g.executions,width:200,height:32,color:"currentColor",className:"text-white"})}),d>0&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs",children:[e.jsx(Ee,{className:"h-3 w-3"}),e.jsx("span",{children:"Active"}),e.jsx("span",{className:"text-muted-foreground ml-1",children:"Last 7 days"})]})]})}),e.jsx(_,{className:"bg-card border-white/10",children:e.jsxs(R,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Quality Score"}),e.jsx("p",{className:"text-3xl font-bold",children:M>0?`${M.toFixed(1)}%`:"N/A"})]}),e.jsx("div",{className:"p-3 rounded-xl bg-muted",children:e.jsx(se,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"mt-3",children:e.jsx(Re,{data:g.quality,width:200,height:32,color:"currentColor",className:"text-white"})}),M>0&&e.jsx("div",{className:"flex items-center gap-1 mt-2 text-xs",children:M>=80?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"h-3 w-3"}),e.jsx("span",{children:"Excellent"})]}):M>=60?e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"h-3 w-3"}),e.jsx("span",{children:"Good"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"h-3 w-3"}),e.jsx("span",{children:"Needs Improvement"})]})})]})}),e.jsx(_,{className:"bg-card border-white/10",children:e.jsxs(R,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Response Time"}),e.jsx("p",{className:"text-3xl font-bold",children:N>0?F(N):"N/A"})]}),e.jsx("div",{className:"p-3 rounded-xl bg-muted",children:e.jsx(Le,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"mt-3",children:e.jsx(Re,{data:g.responseTime,width:200,height:32,color:"currentColor",className:"text-white"})}),N>0&&e.jsx("div",{className:"flex items-center gap-1 mt-2 text-xs",children:N<2e3?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"h-3 w-3"}),e.jsx("span",{children:"Fast"})]}):N<5e3?e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"h-3 w-3"}),e.jsx("span",{children:"Normal"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"h-3 w-3"}),e.jsx("span",{children:"Slow"})]})})]})}),e.jsx(_,{className:"bg-card border-white/10",children:e.jsxs(R,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Cost"}),e.jsxs("p",{className:"text-3xl font-bold",children:["$",z.toFixed(2)]})]}),e.jsx("div",{className:"p-3 rounded-xl bg-muted",children:e.jsx(is,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"mt-3",children:e.jsx(Re,{data:g.cost,width:200,height:32,color:"currentColor",className:"text-white"})}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[e.jsx(ae,{className:"h-3 w-3"}),e.jsxs("span",{children:[k(r)," tokens used"]})]})]})})]}),e.jsxs(_,{className:"border-white/10",children:[e.jsxs(J,{children:[e.jsx(te,{className:"text-lg",children:"Agent Performance"}),e.jsx(de,{children:"Detailed metrics for each agent"})]}),e.jsx(R,{children:C.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(K,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No agents yet"}),e.jsx("p",{className:"text-sm",children:"Create agents to see their performance metrics"})]}):C.every(p=>p.executions===0)?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Se,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No activity yet"}),e.jsx("p",{className:"text-sm",children:"Start chatting with your agents to track metrics"})]}):e.jsx("div",{className:"space-y-4",children:C.map(({agent:p,executions:f,avgResponseTime:a,totalTokens:c,qualityScore:E,lastExecuted:P,cost:G})=>e.jsxs("div",{className:$("p-4 rounded-xl border transition-all",f>0?"bg-muted/10 border-white/10":"bg-muted/5 border-white/5"),children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-secondary border border-white/5",children:e.jsx(K,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold truncate",children:p.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(L,{variant:"outline",className:"border-white/10",children:p.category}),P&&e.jsxs("span",{children:["Last used: ",new Date(P).toLocaleDateString()]})]})]}),f>0&&e.jsx(L,{variant:"outline",className:"border-white/10 bg-transparent",children:E>0?`${E.toFixed(0)}% quality`:"No ratings"})]}),f>0?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Executions"}),e.jsxs("p",{className:"font-semibold flex items-center gap-1",children:[e.jsx(Se,{className:"h-3 w-3 text-muted-foreground"}),f]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Avg Response"}),e.jsxs("p",{className:"font-semibold flex items-center gap-1",children:[e.jsx(Le,{className:"h-3 w-3 text-muted-foreground"}),F(a)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Tokens Used"}),e.jsxs("p",{className:"font-semibold flex items-center gap-1",children:[e.jsx(ae,{className:"h-3 w-3 text-muted-foreground"}),k(c)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Est. Cost"}),e.jsxs("p",{className:"font-semibold flex items-center gap-1",children:[e.jsx(is,{className:"h-3 w-3 text-muted-foreground"}),"$",G.toFixed(3)]})]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No activity yet"})]},p.id))})})]}),b>0&&e.jsxs(_,{className:"bg-muted/5 border-white/10",children:[e.jsx(J,{children:e.jsxs(te,{className:"text-lg flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"AI Insights"]})}),e.jsxs(R,{className:"space-y-3",children:[C.filter(p=>p.executions>0).slice(0,1).map(({agent:p,executions:f})=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/10 border border-white/5",children:[e.jsx(Ee,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Top Performer"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("strong",{children:p.name})," is your most used agent with ",f," executions"]})]})]},p.id)),j>3e3&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/10 border border-white/5",children:[e.jsx(Le,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Optimization Opportunity"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Average response time is ",F(j),". Consider using faster models for time-sensitive tasks."]})]})]}),w>1e5&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/10 border border-white/5",children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"High Usage"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["You've used ",k(w)," tokens. Consider upgrading for better rates."]})]})]})]})]})]})},cs=100,Pt={fact:$e,preference:vs,context:Pe,history:gs},ds={fact:"bg-primary/5 text-primary border-primary/20",preference:"bg-primary/5 text-primary border-primary/20",context:"bg-primary/5 text-primary border-primary/20",history:"bg-primary/5 text-primary border-primary/20"},_t=({userId:s,agentId:i="global"})=>{const[n,l]=h.useState([]),[t,x]=h.useState(""),[A,b]=h.useState("all"),[w,o]=h.useState(!1),[j,T]=h.useState(null),[u,y]=h.useState(""),[g,C]=h.useState({key:"",value:"",type:"fact"}),{toast:S}=xe(),m=()=>{const k=_e();l(k[i]||[])};h.useEffect(()=>{m()},[i]);const O=(()=>{const k=JSON.stringify(_e());return new Blob([k]).size/1024})(),D=Math.min(O/cs*100,100),d=()=>{if(!g.key.trim()||!g.value.trim()){S({title:"Error",description:"Key and value are required",variant:"destructive"});return}if(n.some(k=>k.key.toLowerCase()===g.key.toLowerCase())){S({title:"Error",description:"A memory with this key already exists",variant:"destructive"});return}Ct({key:g.key,value:g.value,type:g.type,agentId:i}),m(),C({key:"",value:"",type:"fact"}),o(!1),S({title:"Memory Added",description:"New memory entry saved successfully"})},r=k=>{if(!u.trim()){S({title:"Error",description:"Value cannot be empty",variant:"destructive"});return}St(i,k,u),m(),T(null),y(""),S({title:"Updated",description:"Memory entry updated"})},N=k=>{At(i,k),m(),S({title:"Deleted",description:"Memory entry removed"})},M=k=>{T(k.id),y(k.value)},z=()=>{T(null),y("")},F=n.filter(k=>{const p=k.key.toLowerCase().includes(t.toLowerCase())||k.value.toLowerCase().includes(t.toLowerCase()),f=A==="all"||k.type===A;return p&&f});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Fe,{className:"h-6 w-6 text-primary"}),"Agent Memory"]}),e.jsx("p",{className:"text-muted-foreground",children:"Persistent context that carries across conversations"})]}),e.jsxs(v,{onClick:()=>o(!0),className:"gap-2",children:[e.jsx(pe,{className:"h-4 w-4"})," Add Memory"]})]}),e.jsx(_,{className:"border-border/50",children:e.jsxs(R,{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Memory Usage"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[O.toFixed(2),"KB / ",cs,"KB"]})]}),e.jsx(Zs,{value:D,className:$("h-2",D>80?"bg-destructive/50":"bg-muted")}),D>80&&e.jsx("p",{className:"text-xs text-destructive mt-2",children:"âš ï¸ Storage nearly full. Consider removing old entries."})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(es,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Q,{placeholder:"Search memories...",value:t,onChange:k=>x(k.target.value),className:"pl-10 bg-background/50 border-border/50"})]}),e.jsxs(ue,{value:A,onValueChange:b,children:[e.jsx(ge,{className:"w-[180px]",children:e.jsx(je,{placeholder:"All Types"})}),e.jsxs(fe,{children:[e.jsx(Y,{value:"all",children:"All Types"}),e.jsx(Y,{value:"fact",children:"Facts"}),e.jsx(Y,{value:"preference",children:"Preferences"}),e.jsx(Y,{value:"context",children:"Context"}),e.jsx(Y,{value:"history",children:"History"})]})]})]}),e.jsxs(_,{children:[e.jsxs(J,{children:[e.jsxs(te,{className:"text-lg",children:["Memory Entries (",F.length,")"]}),e.jsx(de,{children:"These entries are automatically included in agent context"})]}),e.jsx(R,{className:"space-y-3",children:F.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Fe,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:n.length===0?"No memories yet":"No matching memories"}),e.jsx("p",{className:"text-sm",children:n.length===0?"Add memories to give your agents persistent context":"Try adjusting your search or filter"})]}):F.map(k=>{const p=Pt[k.type],f=j===k.id;return e.jsx("div",{className:$("p-4 rounded-xl border transition-all","bg-muted/30 border-border/50 hover:border-primary/20"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:$("p-2 rounded-lg shrink-0",ds[k.type].split(" ")[0]),children:e.jsx(p,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-sm font-semibold",children:k.key}),e.jsx(L,{className:ds[k.type],children:k.type})]}),f?e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(me,{value:u,onChange:a=>y(a.target.value),className:"flex-1 min-h-[60px]",autoFocus:!0}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(v,{size:"icon",onClick:()=>r(k.id),children:e.jsx(Ns,{className:"h-4 w-4"})}),e.jsx(v,{size:"icon",variant:"ghost",onClick:z,children:e.jsx(Ds,{className:"h-4 w-4"})})]})]}):e.jsx("p",{className:"text-muted-foreground text-sm",children:k.value}),e.jsxs("p",{className:"text-xs text-muted-foreground/60 mt-2",children:["Updated: ",new Date(k.updatedAt).toLocaleString()]})]}),!f&&e.jsxs("div",{className:"flex gap-1 shrink-0",children:[e.jsx(v,{size:"icon",variant:"ghost",onClick:()=>M(k),children:e.jsx(gt,{className:"h-4 w-4"})}),e.jsx(v,{size:"icon",variant:"ghost",onClick:()=>N(k.id),children:e.jsx(Ie,{className:"h-4 w-4 text-destructive"})})]})]})},k.id)})})]}),e.jsx(ye,{open:w,onOpenChange:o,children:e.jsxs(Ne,{children:[e.jsxs(ve,{children:[e.jsx(be,{children:"Add Memory"}),e.jsx(De,{children:"Create a new persistent memory entry for your agents"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Key"}),e.jsx(Q,{value:g.key,onChange:k=>C({...g,key:k.target.value}),placeholder:"e.g., user_name, favorite_topic"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Value"}),e.jsx(me,{value:g.value,onChange:k=>C({...g,value:k.target.value}),placeholder:"The information to remember",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Type"}),e.jsxs(ue,{value:g.type,onValueChange:k=>C({...g,type:k}),children:[e.jsx(ge,{children:e.jsx(je,{})}),e.jsxs(fe,{children:[e.jsx(Y,{value:"fact",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4"})," Fact"]})}),e.jsx(Y,{value:"preference",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4"})," Preference"]})}),e.jsx(Y,{value:"context",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"})," Context"]})}),e.jsx(Y,{value:"history",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4"})," History"]})})]})]})]})]}),e.jsxs(ze,{children:[e.jsx(v,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(v,{onClick:d,children:"Add Memory"})]})]})}),e.jsx(_,{className:"bg-gradient-to-r from-primary/5 via-transparent to-primary/5 border-primary/20",children:e.jsxs(R,{className:"py-4 flex items-start gap-3",children:[e.jsx(Fe,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"How Memory Works"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Memory entries are injected into your agent's context at the start of each conversation. Use facts for static info (name, role), preferences for behavior (tone, format), context for current projects, and history for important past interactions."})]})]})})]})},ms="promptx_tool_configs",Ye=[{id:"web-search",name:"Web Search",description:"Search the internet for current information and real-time data",icon:ss,isPro:!1,category:"search"},{id:"calculator",name:"Calculator",description:"Perform mathematical calculations and unit conversions",icon:mt,isPro:!1,category:"compute"},{id:"file-read",name:"File Reader",description:"Read and analyze uploaded documents (PDF, TXT, CSV, etc.)",icon:$e,isPro:!1,category:"file"},{id:"code-interpreter",name:"Code Interpreter",description:"Execute Python code in a sandboxed environment",icon:et,isPro:!0,category:"compute"},{id:"file-write",name:"File Writer",description:"Generate and save files (documents, images, code)",icon:$e,isPro:!0,category:"file"},{id:"database-query",name:"Database Query",description:"Query connected databases using natural language",icon:ys,isPro:!0,category:"database"}],Rt=({userId:s,agentId:i="global",isPro:n=!1})=>{const[l,t]=h.useState([]),[x,A]=h.useState([]),[b,w]=h.useState(!1),[o,j]=h.useState(!1),[T,u]=h.useState({name:"",url:"",apiKey:"",description:""}),{toast:y}=xe();h.useEffect(()=>{t(Es(i)),g()},[i]);const g=()=>{try{const r=localStorage.getItem(`${ms}_custom`);A(r?JSON.parse(r):[])}catch{A([])}},C=r=>{localStorage.setItem(`${ms}_custom`,JSON.stringify(r)),A(r)},S=(r,N)=>{const M=Ye.find(F=>F.id===r);if(M!=null&&M.isPro&&!n&&N){y({title:"Pro Feature",description:"Upgrade to Pro to access this tool.",variant:"destructive"});return}const z=l.map(F=>F.toolId===r?{...F,enabled:N}:F);z.find(F=>F.toolId===r)||z.push({toolId:r,enabled:N}),t(z),j(!0)},m=()=>{Et(i,l),j(!1),y({title:"Tools Saved",description:"Your tool configuration has been saved."})},I=()=>{if(!T.name.trim()||!T.url.trim()){y({title:"Error",description:"Name and URL are required",variant:"destructive"});return}if(!n){y({title:"Pro Feature",description:"Custom integrations require a Pro plan.",variant:"destructive"});return}const r={id:`int-${Date.now()}`,name:T.name,url:T.url,apiKey:T.apiKey||void 0,description:T.description,createdAt:new Date().toISOString()};C([...x,r]),u({name:"",url:"",apiKey:"",description:""}),w(!1),y({title:"Integration Added",description:`${r.name} has been configured.`})},O=r=>{C(x.filter(N=>N.id!==r)),y({title:"Integration Removed",description:"The integration has been deleted."})},D=r=>{var N,M;return((N=l.find(z=>z.toolId===r))==null?void 0:N.enabled)??((M=Ye.find(z=>z.id===r))==null?void 0:M.isPro)===!1},d=r=>Ye.filter(N=>N.category===r);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Je,{className:"h-6 w-6 text-primary"}),"Agent Tools"]}),e.jsx("p",{className:"text-muted-foreground",children:"Configure capabilities and integrations for your agents"})]}),o&&e.jsxs(v,{onClick:m,className:"gap-2",children:[e.jsx(Ns,{className:"h-4 w-4"})," Save Changes"]})]}),e.jsxs(_,{children:[e.jsxs(J,{children:[e.jsx(te,{className:"text-lg",children:"Built-in Tools"}),e.jsx(de,{children:"Enable capabilities that all agents can use"})]}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"SEARCH & WEB"}),e.jsx("div",{className:"space-y-3",children:d("search").map(r=>{const N=D(r.id);return e.jsxs("div",{className:$("flex items-center justify-between p-4 rounded-xl border transition-all",N?"bg-primary/5 border-primary/20":"bg-muted/30 border-border/50"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:$("p-2 rounded-lg",N?"bg-primary/20":"bg-muted"),children:e.jsx(r.icon,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:r.name}),r.isPro&&e.jsxs(L,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white border-0",children:[e.jsx(ie,{className:"h-3 w-3 mr-1"})," Pro"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})]})]}),e.jsx(le,{checked:N,onCheckedChange:M=>S(r.id,M)})]},r.id)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"COMPUTE"}),e.jsx("div",{className:"space-y-3",children:d("compute").map(r=>{const N=D(r.id);return e.jsxs("div",{className:$("flex items-center justify-between p-4 rounded-xl border transition-all",N?"bg-primary/5 border-primary/20":"bg-muted/30 border-border/50"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:$("p-2 rounded-lg",N?"bg-primary/20":"bg-muted"),children:e.jsx(r.icon,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:r.name}),r.isPro&&e.jsxs(L,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white border-0",children:[e.jsx(ie,{className:"h-3 w-3 mr-1"})," Pro"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})]})]}),e.jsx(le,{checked:N,onCheckedChange:M=>S(r.id,M)})]},r.id)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"FILES"}),e.jsx("div",{className:"space-y-3",children:d("file").map(r=>{const N=D(r.id);return e.jsxs("div",{className:$("flex items-center justify-between p-4 rounded-xl border transition-all",N?"bg-primary/5 border-primary/20":"bg-muted/30 border-border/50"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:$("p-2 rounded-lg",N?"bg-primary/20":"bg-muted"),children:e.jsx(r.icon,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:r.name}),r.isPro&&e.jsxs(L,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white border-0",children:[e.jsx(ie,{className:"h-3 w-3 mr-1"})," Pro"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})]})]}),e.jsx(le,{checked:N,onCheckedChange:M=>S(r.id,M)})]},r.id)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"DATABASE"}),e.jsx("div",{className:"space-y-3",children:d("database").map(r=>{const N=D(r.id);return e.jsxs("div",{className:$("flex items-center justify-between p-4 rounded-xl border transition-all",N?"bg-primary/5 border-primary/20":"bg-muted/30 border-border/50"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:$("p-2 rounded-lg",N?"bg-primary/20":"bg-muted"),children:e.jsx(r.icon,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:r.name}),r.isPro&&e.jsxs(L,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white border-0",children:[e.jsx(ie,{className:"h-3 w-3 mr-1"})," Pro"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})]})]}),e.jsx(le,{checked:N,onCheckedChange:M=>S(r.id,M)})]},r.id)})})]})]})]}),e.jsxs(_,{children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(te,{className:"text-lg flex items-center gap-2",children:["Custom API Integrations",!n&&e.jsxs(L,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white border-0",children:[e.jsx(ie,{className:"h-3 w-3 mr-1"})," Pro"]})]}),e.jsx(de,{children:"Connect external APIs and services"})]}),e.jsxs(v,{size:"sm",onClick:()=>w(!0),disabled:!n,children:[e.jsx(pe,{className:"h-4 w-4 mr-1"})," Add Integration"]})]})}),e.jsx(R,{children:x.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(rs,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No custom integrations configured"}),!n&&e.jsx("p",{className:"text-xs mt-1",children:"Upgrade to Pro to add custom APIs"})]}):e.jsx("div",{className:"space-y-3",children:x.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl border bg-muted/30 border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:e.jsx(rs,{className:"h-5 w-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:r.name}),r.apiKey&&e.jsxs(L,{variant:"outline",className:"text-xs",children:[e.jsx(qe,{className:"h-3 w-3 mr-1"})," Secured"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate max-w-[300px]",children:r.url})]})]}),e.jsx(v,{size:"icon",variant:"ghost",onClick:()=>O(r.id),children:e.jsx(Ie,{className:"h-4 w-4 text-destructive"})})]},r.id))})})]}),e.jsx(ye,{open:b,onOpenChange:w,children:e.jsxs(Ne,{children:[e.jsxs(ve,{children:[e.jsx(be,{children:"Add Custom Integration"}),e.jsx(De,{children:"Connect an external API or service"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Integration Name"}),e.jsx(Q,{value:T.name,onChange:r=>u({...T,name:r.target.value}),placeholder:"e.g., Weather API"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"API URL"}),e.jsx(Q,{value:T.url,onChange:r=>u({...T,url:r.target.value}),placeholder:"https://api.example.com/v1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"API Key (Optional)"}),e.jsx(Q,{type:"password",value:T.apiKey,onChange:r=>u({...T,apiKey:r.target.value}),placeholder:"Your API key"}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(qe,{className:"h-3 w-3"})," Stored securely in your browser"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Description"}),e.jsx(me,{value:T.description,onChange:r=>u({...T,description:r.target.value}),placeholder:"What does this API do?",rows:2})]})]}),e.jsxs(ze,{children:[e.jsx(v,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),e.jsx(v,{onClick:I,children:"Add Integration"})]})]})}),e.jsx(_,{className:"bg-gradient-to-r from-primary/5 via-transparent to-primary/5 border-primary/20",children:e.jsxs(R,{className:"py-4 flex items-start gap-3",children:[e.jsx(Je,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"How Tools Work"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enabled tools are described to your agents in their system prompt, allowing them to understand what capabilities they have. Your agents will mention when they need a tool that isn't enabled."})]})]})})]})},Os="promptx_orchestrations",Lt=()=>{try{const s=localStorage.getItem(Os);return s?JSON.parse(s):[]}catch{return[]}},Ft=s=>{localStorage.setItem(Os,JSON.stringify(s))},Gt=({userId:s,agents:i=[]})=>{const[n,l]=h.useState(()=>Lt()),[t,x]=h.useState(null),[A,b]=h.useState(!1),[w,o]=h.useState(!1),[j,T]=h.useState(!1),[u,y]=h.useState(0),[g,C]=h.useState(""),[S,m]=h.useState({name:"",description:""}),{toast:I}=xe(),O=a=>{l(a),Ft(a)},D=()=>{if(!S.name){I({title:"Error",description:"Please enter a name",variant:"destructive"});return}const a={id:`orch-${Date.now()}`,name:S.name,description:S.description,nodes:[],createdAt:new Date().toISOString(),status:"draft"};O([a,...n]),x(a),m({name:"",description:""}),b(!1),I({title:"Created!",description:"Now add agents to your workflow"})},d=a=>{const c=n.filter(E=>E.id!==a);O(c),(t==null?void 0:t.id)===a&&x(null),I({title:"Deleted",description:"Workflow removed"})},r=a=>{if(!t)return;const c=i.find(B=>B.id===a);if(!c)return;const E=t.nodes[t.nodes.length-1],P={id:`n-${Date.now()}`,agentId:c.id,agentName:c.name,systemPrompt:c.system_prompt||"",inputFrom:E==null?void 0:E.id,order:t.nodes.length+1,status:"pending"},G={...t,nodes:[...t.nodes,P]};x(G),O(n.map(B=>B.id===G.id?G:B))},N=a=>{if(!t)return;const c=t.nodes.filter(P=>P.id!==a).map((P,G)=>{var B;return{...P,order:G+1,inputFrom:G===0||(B=t.nodes[G-1])==null?void 0:B.id}}),E={...t,nodes:c};x(E),O(n.map(P=>P.id===E.id?E:P))},M=(a,c)=>{if(!t)return;const E=t.nodes.findIndex(H=>H.id===a);if(E===-1)return;const P=c==="up"?E-1:E+1;if(P<0||P>=t.nodes.length)return;const G=[...t.nodes];[G[E],G[P]]=[G[P],G[E]];const B=G.map((H,we)=>{var re;return{...H,order:we+1,inputFrom:we===0||(re=G[we-1])==null?void 0:re.id}}),q={...t,nodes:B};x(q),O(n.map(H=>H.id===q.id?q:H))},z=a=>{const c={...a,id:`orch-${Date.now()}`,name:`${a.name} (Copy)`,createdAt:new Date().toISOString(),status:"draft",lastRun:void 0,lastInput:void 0,finalOutput:void 0,totalDuration:void 0,nodes:a.nodes.map(E=>({...E,id:`n-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,status:"pending",output:void 0,error:void 0,duration:void 0}))};O([c,...n]),x(c),I({title:"Duplicated!",description:`Created "${c.name}"`})},F=async()=>{if(!t||t.nodes.length===0){I({title:"Error",description:"Add at least one agent to run",variant:"destructive"});return}if(!g.trim()){I({title:"Error",description:"Please enter an initial prompt",variant:"destructive"});return}T(!0),y(0),o(!1);const a=Date.now();let c={...t,status:"running",lastInput:g,nodes:t.nodes.map(q=>({...q,status:"pending",output:void 0,error:void 0,duration:void 0}))};x(c),O(n.map(q=>q.id===c.id?c:q));let E=g,P=!0,G="";for(let q=0;q<c.nodes.length;q++){const H=c.nodes[q];y(q+1);const we=Date.now();c={...c,nodes:c.nodes.map((ee,ke)=>ke===q?{...ee,status:"running"}:ee)},x(c);const re=await Is(H.agentId,H.systemPrompt||`You are a helpful AI assistant named ${H.agentName}. Process the following input and provide a clear, useful response.`,E),as=Date.now()-we;if(!re.success){c={...c,status:"failed",nodes:c.nodes.map((ee,ke)=>ke===q?{...ee,status:"failed",error:re.error,duration:as}:ee)},x(c),O(n.map(ee=>ee.id===c.id?c:ee)),I({title:"Workflow Failed",description:`Step ${q+1} (${H.agentName}) failed: ${re.error}`,variant:"destructive"}),P=!1;break}c={...c,nodes:c.nodes.map((ee,ke)=>ke===q?{...ee,status:"completed",output:re.response,duration:as}:ee)},x(c),E=re.response||"",G=E}const B=Date.now()-a;if(P){c={...c,status:"completed",lastRun:new Date().toISOString(),totalDuration:B,finalOutput:G},x(c),O(n.map(H=>H.id===c.id?c:H));const q=B>1e3?`${(B/1e3).toFixed(1)}s`:`${B}ms`;I({title:"Workflow Complete! ðŸŽ‰",description:`Finished in ${q}`})}T(!1),y(0),C("")},k=a=>{switch(a){case"active":return"bg-primary/10 text-primary border-primary/20";case"running":return"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20";case"completed":return"bg-primary/10 text-primary border-primary/20";case"failed":return"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20";default:return"bg-muted text-muted-foreground border-border/50"}},p=a=>{switch(a){case"running":return e.jsx(Ge,{className:"h-5 w-5 animate-spin"});case"completed":return e.jsx(bs,{className:"h-5 w-5"});case"failed":return e.jsx(st,{className:"h-5 w-5"});default:return null}},f=a=>{navigator.clipboard.writeText(a),I({title:"Copied!",description:"Output copied to clipboard"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 mb-2",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold flex items-center gap-3 tracking-tight",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-primary/10 border border-primary/20",children:e.jsx(Me,{className:"h-6 w-6 text-primary"})}),"Agent Orchestration"]}),e.jsx("p",{className:"text-muted-foreground text-base mt-2.5 ml-14",children:"Chain agents together to create powerful automated workflows"})]}),e.jsxs(ye,{open:A,onOpenChange:b,children:[e.jsx(He,{asChild:!0,children:e.jsxs(v,{className:"gap-2.5 bg-primary hover:bg-primary/90 shadow-lg hover:shadow-xl transition-all duration-300 font-semibold px-6",children:[e.jsx(pe,{className:"h-4 w-4"})," New Workflow"]})}),e.jsxs(Ne,{children:[e.jsxs(ve,{children:[e.jsx(be,{children:"Create Orchestration"}),e.jsx(De,{children:"Define a multi-agent workflow"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Workflow Name"}),e.jsx(Q,{value:S.name,onChange:a=>m({...S,name:a.target.value}),placeholder:"e.g., Content Research Pipeline"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Description"}),e.jsx(me,{value:S.description,onChange:a=>m({...S,description:a.target.value}),placeholder:"What does this workflow accomplish?",rows:3})]})]}),e.jsxs(ze,{children:[e.jsx(v,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsx(v,{onClick:D,children:"Create Workflow"})]})]})]})]}),i.length===0&&e.jsx(_,{className:"border-primary/20 bg-primary/5",children:e.jsxs(R,{className:"py-4 flex items-center gap-3",children:[e.jsx(K,{className:"h-5 w-5 text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Create some agents first in the "My Agents" tab to use them in workflows.'})]})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(_,{className:"lg:col-span-1",children:[e.jsxs(J,{children:[e.jsx(te,{className:"text-lg",children:"Workflows"}),e.jsxs(de,{children:[n.length," orchestrations"]})]}),e.jsx(R,{className:"space-y-3",children:n.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Me,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No workflows yet"})]}):n.map(a=>e.jsxs("div",{onClick:()=>x(a),className:$("p-4 rounded-xl border cursor-pointer transition-all group",(t==null?void 0:t.id)===a.id?"bg-primary/10 border-primary/30":"bg-muted/30 border-border/50 hover:border-primary/20"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold truncate",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:a.description})]}),e.jsx(L,{className:k(a.status),children:a.status})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(K,{className:"h-3 w-3"}),a.nodes.length," agents",a.totalDuration&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx(Ue,{className:"h-3 w-3"}),a.totalDuration>1e3?`${(a.totalDuration/1e3).toFixed(1)}s`:`${a.totalDuration}ms`]}),a.lastRun&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx(Le,{className:"h-3 w-3"}),new Date(a.lastRun).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(v,{size:"icon",variant:"ghost",className:"h-6 w-6",title:"Duplicate workflow",onClick:c=>{c.stopPropagation(),z(a)},children:e.jsx(xt,{className:"h-3 w-3"})}),e.jsx(v,{size:"icon",variant:"ghost",className:"h-6 w-6",title:"Delete workflow",onClick:c=>{c.stopPropagation(),d(a.id)},children:e.jsx(Ie,{className:"h-3 w-3 text-destructive"})})]})]})]},a.id))})]}),e.jsxs(_,{className:"lg:col-span-2",children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(te,{className:"text-lg",children:t?t.name:"Select a Workflow"}),e.jsx(de,{children:t?t.description:"Choose a workflow to edit"})]}),t&&e.jsxs("div",{className:"flex items-center gap-2",children:[t.lastInput&&!j&&e.jsxs(v,{variant:"outline",size:"sm",className:"gap-2",title:"Re-run with last input",onClick:()=>{C(t.lastInput||""),o(!0)},children:[e.jsx(Ps,{className:"h-4 w-4"}),"Re-run"]}),e.jsxs(ye,{open:w,onOpenChange:o,children:[e.jsx(He,{asChild:!0,children:e.jsx(v,{disabled:j||t.nodes.length===0,className:"gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"h-4 w-4 animate-spin"}),"Running Step ",u,"/",t.nodes.length]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"h-4 w-4"})," Run Workflow"]})})}),e.jsxs(Ne,{children:[e.jsxs(ve,{children:[e.jsx(be,{children:"Run Workflow"}),e.jsx(De,{children:"Enter the initial prompt to start the workflow. Each agent will process and pass output to the next."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Initial Prompt"}),e.jsx(me,{value:g,onChange:a=>C(a.target.value),placeholder:"e.g., Write a blog post about the future of AI in healthcare",rows:4,className:"resize-none"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("p",{children:["This workflow will run ",t==null?void 0:t.nodes.length," agents in sequence:"]}),e.jsx("p",{className:"mt-1 font-medium",children:t==null?void 0:t.nodes.map(a=>a.agentName).join(" â†’ ")})]})]}),e.jsxs(ze,{children:[e.jsx(v,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsxs(v,{onClick:F,disabled:!g.trim(),children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"})," Start Workflow"]})]})]})]})]})]})}),e.jsx(R,{children:t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[t.nodes.map((a,c)=>{var E;return e.jsxs("div",{className:"relative",children:[c>0&&e.jsx("div",{className:"absolute left-7 -top-4 w-0.5 h-4 bg-primary/30"}),e.jsxs("div",{className:$("p-4 rounded-xl border transition-all",a.status==="running"?"bg-blue-500/10 border-blue-500/50":a.status==="completed"?"bg-primary/10 border-primary/30":a.status==="failed"?"bg-red-500/10 border-red-500/30":"bg-muted/30 border-border/50"),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx(v,{size:"icon",variant:"ghost",className:"h-5 w-5",disabled:c===0||j,onClick:()=>M(a.id,"up"),title:"Move up",children:e.jsx(dt,{className:"h-3 w-3"})}),e.jsx(v,{size:"icon",variant:"ghost",className:"h-5 w-5",disabled:c===t.nodes.length-1||j,onClick:()=>M(a.id,"down"),title:"Move down",children:e.jsx(ct,{className:"h-3 w-3"})})]}),e.jsx("div",{className:$("w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm shrink-0",a.status==="running"?"bg-blue-500 text-white":a.status==="completed"?"bg-primary text-primary-foreground":a.status==="failed"?"bg-red-500 text-white":"bg-primary/20 text-primary"),children:p(a.status)||a.order}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4 text-primary shrink-0"}),e.jsx("span",{className:"font-semibold",children:a.agentName}),a.duration&&e.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(Ue,{className:"h-3 w-3"}),a.duration>1e3?`${(a.duration/1e3).toFixed(1)}s`:`${a.duration}ms`]})]}),a.inputFrom&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["â† Receives output from Step ",(E=t.nodes.find(P=>P.id===a.inputFrom))==null?void 0:E.order]})]}),e.jsx(v,{size:"icon",variant:"ghost",onClick:()=>N(a.id),disabled:j,children:e.jsx(Ie,{className:"h-4 w-4 text-destructive"})})]}),a.output&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-primary",children:"Output:"}),e.jsx(v,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>f(a.output||""),children:e.jsx(ce,{className:"h-3 w-3"})})]}),e.jsx(Ke,{className:"h-24",children:e.jsxs("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:[a.output.substring(0,500),a.output.length>500?"...":""]})})]}),a.error&&e.jsx("div",{className:"mt-3 pt-3 border-t border-red-500/30",children:e.jsxs("p",{className:"text-xs text-red-400",children:["Error: ",a.error]})})]}),c<t.nodes.length-1&&e.jsx("div",{className:"flex justify-center py-2",children:e.jsx(ts,{className:"h-5 w-5 text-primary/50 rotate-90"})})]},a.id)}),e.jsxs(ue,{onValueChange:r,disabled:j||i.length===0,children:[e.jsx(ge,{className:"border-dashed border-2 border-primary/30 bg-primary/5 hover:bg-primary/10",children:e.jsx(je,{placeholder:i.length===0?"Create agents first":"+ Add Agent to Workflow"})}),e.jsx(fe,{children:i.map(a=>e.jsx(Y,{value:a.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),a.name,e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",a.category,")"]})]})},a.id))})]})]}),t.finalOutput&&e.jsxs(_,{className:"border-green-500/30 bg-green-500/5",children:[e.jsx(J,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(te,{className:"text-sm flex items-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4 text-green-400"}),"Final Output"]}),e.jsxs(v,{size:"sm",variant:"ghost",onClick:()=>f(t.finalOutput||""),children:[e.jsx(ce,{className:"h-3 w-3 mr-1"})," Copy"]})]})}),e.jsx(R,{children:e.jsx(Ke,{className:"h-40",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.finalOutput})})})]}),t.nodes.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Me,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No agents in this workflow"}),e.jsx("p",{className:"text-sm",children:"Add agents above to build your automation pipeline"})]})]}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Me,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Select a workflow to view and edit"}),e.jsx("p",{className:"text-sm",children:"Or create a new one to get started"})]})})]})]}),e.jsx(_,{className:"bg-gradient-to-r from-primary/5 via-transparent to-primary/5 border-primary/20",children:e.jsxs(R,{className:"py-4 flex items-start gap-3",children:[e.jsx(ae,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"How Orchestration Works"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Each agent receives the output from the previous agent as context. Chain Research â†’ Analysis â†’ Writing for powerful automated content creation, or build custom pipelines for any multi-step task."})]})]})})]})},$t=({agent:s,open:i,onOpenChange:n})=>{var S;const[l,t]=h.useState([]),[x,A]=h.useState(""),[b,w]=h.useState(!1),o=h.useRef(null),j=h.useRef(null),{toast:T}=xe();h.useEffect(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[l]),h.useEffect(()=>{i&&j.current&&setTimeout(()=>{var m;return(m=j.current)==null?void 0:m.focus()},100)},[i]),h.useEffect(()=>{t([])},[s.id]);const u=async()=>{if(!x.trim()||b)return;const m={id:`msg-${Date.now()}`,role:"user",content:x.trim(),timestamp:new Date};t(d=>[...d,m]),A(""),w(!0);const I=`msg-${Date.now()+1}`,O={id:I,role:"assistant",content:"",timestamp:new Date,isStreaming:!0};t(d=>[...d,O]);const D=performance.now();try{const d=As(s.id),r=Ms(s.id);let N=s.system_prompt||`You are ${s.name}, a helpful AI assistant.`;d&&(N+=`

## Memory Context:
${d}`),r&&(N+=`

## Available Tools:
${r}`);const M=l.filter(f=>!f.isStreaming).map(f=>`${f.role==="user"?"User":"Assistant"}: ${f.content}`).join(`

`),z=M?`${M}

User: ${m.content}`:m.content,F=await Is(s.id,N,z),p=performance.now()-D;if(F.success&&F.response){const f=F.response;let a="";for(let c=0;c<f.length;c++){a+=f[c],t(P=>P.map(G=>G.id===I?{...G,content:a}:G));const E=f[c]===" "?5:f[c]==="."?30:f[c]===`
`?15:8;await new Promise(P=>setTimeout(P,E))}t(c=>c.map(E=>E.id===I?{...E,isStreaming:!1}:E)),Ss(s.id,f.length*.75,p)}else throw new Error(F.error||"Failed to get response")}catch(d){console.error("Chat error:",d),t(r=>r.map(N=>N.id===I?{...N,content:"Sorry, I encountered an error. Please try again.",isStreaming:!1}:N)),T({title:"Error",description:d instanceof Error?d.message:"Failed to get response",variant:"destructive"})}finally{w(!1)}},y=(m,I)=>{t(d=>d.map(r=>r.id===m?{...r,rated:I}:r));const O=`promptx_quality_${s.id}`,D=JSON.parse(localStorage.getItem(O)||"[]");D.push({rating:I,timestamp:Date.now()}),localStorage.setItem(O,JSON.stringify(D)),T({title:I==="up"?"Thanks for the feedback! ðŸ‘":"Feedback recorded",description:I==="up"?"We're glad this was helpful!":"We'll work on improving."})},g=m=>{navigator.clipboard.writeText(m),T({title:"Copied!",description:"Message copied to clipboard"})},C=m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),u())};return e.jsx(ye,{open:i,onOpenChange:n,children:e.jsxs(Ne,{className:"max-w-2xl h-[80vh] flex flex-col p-0 gap-0 bg-background border-white/10",children:[e.jsx(ve,{className:"px-6 py-4 border-b border-white/10 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-secondary border border-white/10",children:e.jsx(K,{className:"h-5 w-5 text-foreground"})}),e.jsxs("div",{children:[e.jsx(be,{className:"text-lg",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx(L,{variant:"outline",className:"text-xs border-white/10",children:s.category}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.model||"grok-3"})]})]})]}),e.jsx(v,{variant:"ghost",size:"icon",onClick:()=>t([]),disabled:l.length===0,title:"Clear chat",className:"text-muted-foreground hover:text-foreground",children:e.jsx(fs,{className:"h-4 w-4"})})]})}),e.jsx(Ke,{className:"flex-1 px-6",ref:o,children:e.jsx("div",{className:"py-4 space-y-4",children:l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex p-4 rounded-2xl bg-secondary/50 border border-white/10 mb-4",children:e.jsx(se,{className:"h-8 w-8 text-foreground"})}),e.jsx("h3",{className:"font-semibold mb-1",children:"Start a Conversation"}),e.jsxs("p",{className:"text-sm text-muted-foreground max-w-sm mx-auto",children:["Ask ",s.name," anything. This agent specializes in ",(S=s.category)==null?void 0:S.toLowerCase()," tasks."]})]}):l.map(m=>e.jsxs("div",{className:$("flex gap-3",m.role==="user"?"justify-end":"justify-start"),children:[m.role==="assistant"&&e.jsx("div",{className:"p-2 rounded-lg bg-secondary h-fit shrink-0",children:e.jsx(K,{className:"h-4 w-4 text-foreground"})}),e.jsxs("div",{className:$("max-w-[80%] rounded-2xl px-4 py-3",m.role==="user"?"bg-foreground text-background":"bg-muted/50 border border-white/10"),children:[e.jsxs("p",{className:"text-sm whitespace-pre-wrap break-words",children:[m.content,m.isStreaming&&e.jsx("span",{className:"inline-block w-2 h-4 bg-current ml-1 animate-pulse"})]}),m.role==="assistant"&&!m.isStreaming&&m.content&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 pt-2 border-t border-white/10",children:[e.jsx(v,{size:"icon",variant:"ghost",className:$("h-6 w-6 hover:bg-white/10",m.rated==="up"&&"text-foreground"),onClick:()=>y(m.id,"up"),disabled:!!m.rated,children:e.jsx(tt,{className:"h-3 w-3"})}),e.jsx(v,{size:"icon",variant:"ghost",className:$("h-6 w-6 hover:bg-white/10",m.rated==="down"&&"text-foreground"),onClick:()=>y(m.id,"down"),disabled:!!m.rated,children:e.jsx(vt,{className:"h-3 w-3"})}),e.jsx(v,{size:"icon",variant:"ghost",className:"h-6 w-6 ml-auto hover:bg-white/10",onClick:()=>g(m.content),children:e.jsx(ce,{className:"h-3 w-3"})})]})]}),m.role==="user"&&e.jsx("div",{className:"p-2 rounded-lg bg-secondary h-fit shrink-0",children:e.jsx(Ys,{className:"h-4 w-4 text-foreground"})})]},m.id))})}),e.jsxs("div",{className:"px-6 py-4 border-t border-white/10 flex-shrink-0 bg-background",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Q,{ref:j,value:x,onChange:m=>A(m.target.value),onKeyDown:C,placeholder:`Message ${s.name}...`,disabled:b,className:"flex-1 bg-muted/30 border-white/10 focus-visible:ring-offset-0 focus-visible:ring-1 focus-visible:ring-white/20"}),e.jsx(v,{onClick:u,disabled:!x.trim()||b,className:"gap-2 bg-foreground text-background hover:bg-foreground/90",children:b?e.jsx(Ge,{className:"h-4 w-4 animate-spin"}):e.jsx(at,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Press Enter to send â€¢ Responses are streamed in real-time"})]})]})})},zt=["Writing","Education","Business","Marketing","Development","Research","Creative","Other"],qt=[{value:"google/gemini-2.5-flash",label:"Gemini 2.5 Flash (Fast & Balanced)"},{value:"google/gemini-2.5-pro",label:"Gemini 2.5 Pro (Most Capable)"},{value:"google/gemini-2.5-flash-lite",label:"Gemini 2.5 Flash Lite (Fastest)"},{value:"openai/gpt-5-mini",label:"GPT-5 Mini (Balanced)"},{value:"openai/gpt-5",label:"GPT-5 (Most Powerful)"},{value:"openai/gpt-5-nano",label:"GPT-5 Nano (Cost-Effective)"}],Ut=({userId:s,agent:i,onSave:n})=>{var T;const[l,t]=h.useState({name:"",description:"",system_prompt:"",category:"Writing",model:"google/gemini-2.5-flash",temperature:.7,max_tokens:2e3,is_public:!1,tags:[]}),[x,A]=h.useState(""),[b,w]=h.useState(!1),{toast:o}=xe();h.useEffect(()=>{var u;i&&(t({...i,model:i.model||"google/gemini-2.5-flash",temperature:i.temperature||.7,max_tokens:i.max_tokens||2e3}),A(((u=i.tags)==null?void 0:u.join(", "))||""))},[i]);const j=async u=>{u.preventDefault(),w(!0);try{const y=x.split(",").map(m=>m.trim()).filter(m=>m.length>0),{id:g,...C}=l,S={...C,tags:y,user_id:s};if(i!=null&&i.id){const{error:m}=await ne.from("prompt_agents").update(S).eq("id",i.id);if(m)throw console.error("Update error:",m),m;o({title:"Success",description:"Agent updated successfully"})}else{const{error:m}=await ne.from("prompt_agents").insert([S]);if(m)throw console.error("Insert error:",m),m;o({title:"Success",description:"Agent created successfully"})}n()}catch(y){console.error("Error saving agent:",y);let g="Failed to save agent. Please try again.",C="Error";y instanceof Error&&(y.message.includes("uuid")?(C="Invalid Data",g="Invalid data format. Please check your input and try again."):y.message.includes("duplicate")?(C="Duplicate Name",g="An agent with this name already exists. Please use a different name."):y.message.includes("network")||y.message.includes("fetch")?(C="Connection Error",g="Network error. Please check your connection and try again."):y.message&&(g=y.message)),o({title:C,description:g,variant:"destructive"})}finally{w(!1)}};return e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"name",children:"Agent Name *"}),e.jsx(Q,{id:"name",value:l.name,onChange:u=>t({...l,name:u.target.value}),placeholder:"e.g., Cold Email Writer Agent",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"description",children:"Description"}),e.jsx(me,{id:"description",value:l.description,onChange:u=>t({...l,description:u.target.value}),placeholder:"Briefly describe what this agent does",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"system_prompt",children:"System Prompt *"}),e.jsx(me,{id:"system_prompt",value:l.system_prompt,onChange:u=>t({...l,system_prompt:u.target.value}),placeholder:"Define the agent's role, expertise, and behavior. Example: You are an expert cold email writer specializing in B2B sales...",rows:6,required:!0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This is the core instruction that defines how your agent behaves"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"category",children:"Category *"}),e.jsxs(ue,{value:l.category,onValueChange:u=>t({...l,category:u}),children:[e.jsx(ge,{children:e.jsx(je,{})}),e.jsx(fe,{children:zt.map(u=>e.jsx(Y,{value:u,children:u},u))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"tags",children:"Tags (comma-separated)"}),e.jsx(Q,{id:"tags",value:x,onChange:u=>A(u.target.value),placeholder:"e.g., email, sales, b2b"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"model",children:"AI Model"}),e.jsxs(ue,{value:l.model,onValueChange:u=>t({...l,model:u}),children:[e.jsx(ge,{children:e.jsx(je,{})}),e.jsx(fe,{children:qt.map(u=>e.jsx(Y,{value:u.value,children:u.label},u.value))})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Note: Gemini models are currently free, GPT models use credits"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"temperature",children:["Temperature: ",(T=l.temperature)==null?void 0:T.toFixed(1)]}),e.jsx("input",{type:"range",id:"temperature",min:"0",max:"1",step:"0.1",value:l.temperature,onChange:u=>t({...l,temperature:parseFloat(u.target.value)}),className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Lower = more focused, Higher = more creative"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"max_tokens",children:"Max Tokens"}),e.jsx(Q,{type:"number",id:"max_tokens",value:l.max_tokens,onChange:u=>t({...l,max_tokens:parseInt(u.target.value)}),min:"100",max:"4000"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum response length (100-4000)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{id:"is_public",checked:l.is_public,onCheckedChange:u=>t({...l,is_public:u})}),e.jsx(W,{htmlFor:"is_public",children:"Make this agent public (others can view and use it)"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(v,{type:"submit",disabled:b,className:"flex-1",children:[b&&e.jsx(Ge,{className:"w-4 h-4 mr-2 animate-spin"}),i?"Update Agent":"Create Agent"]})})]})},xs="https://github.com/anshpalbusiness-art/prompx-io-18771/releases/download/v1.0.0/PromptX-1.0.0-arm64.dmg",Wt=[{icon:Ve,title:"Auto-Detect Typing",description:"Type a prompt in any supported app â€” PromptX detects it after 3 seconds and enhances automatically"},{icon:ks,title:"Clipboard Monitoring",description:"Copy any text and get instant AI-powered prompt improvements"},{icon:ae,title:"One-Click Paste",description:"Click 'Use' and the enhanced prompt pastes directly into your app"},{icon:ws,title:"Context-Aware",description:"Detects which app you're in â€” coding prompts for Cursor, AI prompts for ChatGPT, and more"}],Yt=[{text:"Download the DMG file using the button above",command:null},{text:"Open Terminal and run this command to remove the download quarantine:",command:"xattr -cr ~/Downloads/PromptX-1.0.0-arm64.dmg"},{text:"Double-click the DMG and drag PromptX to your Applications folder",command:null},{text:"Before launching for the first time, run this in Terminal:",command:"xattr -cr /Applications/PromptX.app"},{text:"Open PromptX from Applications â€” it will appear in your menu bar",command:null},{text:"Grant Accessibility permission when prompted (System Settings â†’ Privacy & Security â†’ Accessibility â†’ Enable PromptX)",command:null},{text:"Start typing prompts in Cursor, Windsurf, or any supported app â€” PromptX handles the rest!",command:null}],Bt=[{category:"AI Coding IDEs",icon:it,apps:["Cursor","VS Code","Windsurf","Zed","Trae"]},{category:"Browsers",icon:ss,apps:["Chrome","Safari","Firefox","Arc","Brave","Edge","Opera","Vivaldi"]},{category:"AI Chat Apps",icon:Pe,apps:["ChatGPT","Claude","Gemini","Copilot","Perplexity","DeepSeek","Poe"]},{category:"Writing & Notes",icon:ks,apps:["Notes","TextEdit","Notion","Obsidian","Pages"]},{category:"Communication",icon:Pe,apps:["Slack","Discord","Telegram","WhatsApp"]}],Ht=({command:s})=>{const[i,n]=h.useState(!1),l=()=>{navigator.clipboard.writeText(s),n(!0),setTimeout(()=>n(!1),2e3)};return e.jsxs("div",{className:"mt-2 flex items-center gap-2 bg-black/40 border border-white/10 rounded-lg px-4 py-2.5 font-mono text-sm",children:[e.jsx(Nt,{className:"h-3.5 w-3.5 text-emerald-400 shrink-0"}),e.jsx("code",{className:"text-emerald-300 flex-1 overflow-x-auto",children:s}),e.jsx("button",{onClick:l,className:"p-1.5 rounded-md hover:bg-white/10 transition-colors shrink-0",title:"Copy command",children:i?e.jsx(oe,{className:"h-3.5 w-3.5 text-emerald-400"}):e.jsx(ce,{className:"h-3.5 w-3.5 text-white/50 hover:text-white/80"})})]})},Kt=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-border/50 bg-gradient-to-br from-[#0a0e27] via-[#0d1440] to-[#0a0e27]",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top_left,rgba(59,130,246,0.15),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_right,rgba(139,92,246,0.1),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(30)].map((s,i)=>e.jsx("div",{className:"absolute w-[2px] h-[2px] bg-white/40 rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${2+Math.random()*3}s`}},i))}),e.jsxs("div",{className:"relative p-8 sm:p-12 flex flex-col lg:flex-row items-center gap-8 lg:gap-12",children:[e.jsxs("div",{className:"flex-1 space-y-6 text-center lg:text-left",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 justify-center lg:justify-start",children:[e.jsxs(L,{className:"bg-blue-500/20 text-blue-300 border-blue-500/30 px-3 py-1",children:[e.jsx(Xe,{className:"h-3 w-3 mr-1.5"}),"Desktop App"]}),e.jsx(L,{variant:"outline",className:"border-emerald-500/30 text-emerald-400 px-3 py-1",children:"v1.0.0"})]}),e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white tracking-tight",children:"PromptX Desktop"}),e.jsx("p",{className:"text-lg text-blue-100/70 max-w-xl",children:"AI-powered prompt enhancement that works everywhere. Type in any app, get instant improvements â€” no copy-paste needed."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center lg:justify-start",children:[e.jsxs(v,{size:"lg",className:"gap-3 bg-white text-gray-900 hover:bg-gray-100 font-semibold px-8 py-6 text-base shadow-xl hover:shadow-2xl transition-all duration-300",onClick:async()=>{try{const i=await(await fetch(xs)).blob(),n=window.URL.createObjectURL(i),l=document.createElement("a");l.href=n,l.download="PromptX-1.0.0-arm64.dmg",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(n)}catch{window.open(xs,"_blank")}},children:[e.jsx(ns,{className:"h-5 w-5"}),"Download for macOS",e.jsx(ts,{className:"h-4 w-4"})]}),e.jsxs(v,{size:"lg",variant:"outline",className:"gap-3 border-white/20 text-white hover:bg-white/10 font-medium px-6 py-6 text-base",disabled:!0,children:[e.jsx(Xe,{className:"h-5 w-5"}),"Windows (Coming Soon)"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-blue-200/50 justify-center lg:justify-start flex-wrap",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(ns,{className:"h-3.5 w-3.5"}),"Apple Silicon (M1â€“M4)"]}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:"macOS 12+"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:"~100 MB"})]})]}),e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"relative w-72 sm:w-80 rounded-xl overflow-hidden border border-white/10 shadow-2xl shadow-blue-500/10",children:e.jsxs("div",{className:"bg-[#111827] p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded bg-gradient-to-br from-blue-600 to-blue-900 flex items-center justify-center text-[8px] text-white font-bold",children:"PX"}),e.jsx("span",{className:"text-white text-sm font-semibold",children:"PromptX"})]}),e.jsx(L,{className:"bg-purple-500/20 text-purple-300 border-purple-500/30 text-[10px] px-2 py-0.5",children:"ENHANCING"})]}),e.jsx("div",{className:"bg-white/5 rounded-lg p-3 border border-white/5",children:e.jsx("p",{className:"text-xs text-blue-100/60 leading-relaxed",children:"âœ¨ Your prompt enhanced with context, constraints, and output format specifications..."})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1 bg-purple-500/20 border border-purple-500/30 rounded-md py-1.5 text-center text-[10px] text-purple-300 font-medium",children:"âš¡ Use"}),e.jsx("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-md py-1.5 text-center text-[10px] text-white/50 font-medium",children:"ðŸ“‹ Copy"})]})]})}),e.jsx("div",{className:"absolute -inset-4 bg-blue-500/5 blur-3xl rounded-full -z-10"})]})]})]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Wt.map(s=>e.jsx(_,{className:"border-border/50 bg-muted/20 hover:bg-muted/30 transition-all duration-300",children:e.jsxs(R,{className:"p-5 flex items-start gap-4",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-primary/10 border border-primary/20 shrink-0",children:e.jsx(s.icon,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:s.description})]})]})},s.title))}),e.jsx(_,{className:"border-border/50 bg-muted/10",children:e.jsxs(R,{className:"p-6 sm:p-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-2 flex items-center gap-2",children:[e.jsx(js,{className:"h-5 w-5 text-primary"}),"Installation Guide"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Follow these steps to install PromptX on your Mac. The Terminal commands are only needed once."}),e.jsx("div",{className:"space-y-5",children:Yt.map((s,i)=>e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-7 h-7 rounded-full bg-primary/10 border border-primary/20 shrink-0 text-sm font-semibold text-primary mt-0.5",children:i+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:s.text}),s.command&&e.jsx(Ht,{command:s.command})]})]},i))}),e.jsx("div",{className:"mt-6 p-4 rounded-lg bg-amber-500/5 border border-amber-500/20",children:e.jsxs("p",{className:"text-sm text-amber-400/80 flex items-start gap-2",children:[e.jsx(_s,{className:"h-4 w-4 shrink-0 mt-0.5"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Why the Terminal commands?"})," PromptX is not code-signed with an Apple Developer certificate yet. The ",e.jsx("code",{className:"bg-white/10 px-1.5 py-0.5 rounded text-xs",children:"xattr -cr"})," command removes macOS's download quarantine flag. This is standard for open-source Mac apps and only needs to be done once."]})]})}),e.jsx("div",{className:"mt-4 p-4 rounded-lg bg-emerald-500/5 border border-emerald-500/20",children:e.jsxs("p",{className:"text-sm text-emerald-400/80 flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4 shrink-0"}),e.jsx("span",{children:"After initial setup, PromptX opens normally from Applications. You can also set it to launch at login from the menu bar icon."})]})})]})}),e.jsx(_,{className:"border-border/50 bg-muted/10",children:e.jsxs(R,{className:"p-6 sm:p-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-5 flex items-center gap-2",children:[e.jsx(qe,{className:"h-5 w-5 text-primary"}),"Supported Apps"]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Bt.map(s=>e.jsxs("div",{className:"p-4 rounded-xl bg-background/50 border border-border/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(s.icon,{className:"h-4 w-4 text-primary"}),e.jsx("h4",{className:"text-sm font-semibold text-foreground",children:s.category})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:s.apps.map(i=>e.jsx(L,{variant:"secondary",className:"text-xs font-medium px-2.5 py-1",children:i},i))})]},s.category))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-4 text-center",children:"PromptX works in any app that accepts text input. The apps above have context-aware prompt enhancements."})]})})]});function Vt({activeStyle:s}){var w;const[i,n]=h.useState(0),[l,t]=h.useState(""),x="tell me about quantum computing",A={professional:"Provide a comprehensive overview of quantum computing covering: 1) Core principles (qubits, superposition, entanglement) 2) Current state of quantum hardware 3) Key algorithms and their advantages 4) Enterprise applications and timeline to practical quantum advantage.",maximum_detail:"Explain quantum computing with extreme depth: Start with the mathematical foundations (Hilbert spaces, quantum gates, Bloch sphere representation). Cover all major qubit types (superconducting, trapped ion, topological, photonic) with their error rates and coherence times...",aggressive:"You are a quantum physicist with 25 years of research experience. Give me the no-BS reality of quantum computing right now. Skip the hype. What actually works? What's vaporware? Which companies are closest to useful quantum advantage? Be brutally honest about timelines.",concise:"Explain quantum computing: core principles, current hardware limits, and 3 most promising near-term applications. Be precise, skip history.",creative:"Take me on a journey into the quantum realm â€” where particles dance between existence and possibility, where a single bit can whisper 'yes' and 'no' simultaneously. Paint the landscape of quantum computing from the bizarre physics to the world-changing applications emerging today."};h.useEffect(()=>{const o=setInterval(()=>{n(j=>(j+1)%4)},3e3);return()=>clearInterval(o)},[]),h.useEffect(()=>{if(i===1){let o=0;const j=setInterval(()=>{t(x.slice(0,o+1)),o++,o>=x.length&&clearInterval(j)},60);return()=>clearInterval(j)}},[i]);const b=A[s]||A.professional;return e.jsxs("div",{className:"relative w-full max-w-sm mx-auto",children:[e.jsx("div",{className:"relative bg-gradient-to-b from-muted/80 to-muted/40 rounded-[2.5rem] p-2 border border-border/50 shadow-2xl",children:e.jsxs("div",{className:"bg-background rounded-[2rem] overflow-hidden",style:{minHeight:420},children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-2 text-[10px] text-muted-foreground",children:[e.jsx("span",{children:"9:41"}),e.jsx("div",{className:"w-20 h-5 bg-foreground/90 rounded-full"}),e.jsx("span",{children:"100%"})]}),e.jsxs("div",{className:"px-4 py-3 border-b border-border/30 flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-green-400 to-emerald-600 flex items-center justify-center text-white text-[10px] font-bold",children:"AI"}),e.jsx("span",{className:"text-sm font-semibold text-foreground",children:"ChatGPT"}),e.jsx(L,{variant:"secondary",className:"text-[9px] px-1.5 py-0 ml-auto",children:"GPT-4"})]}),e.jsxs("div",{className:"p-4 space-y-3",style:{minHeight:220},children:[e.jsx("div",{className:"bg-muted/50 rounded-2xl rounded-tl-md p-3 max-w-[85%]",children:e.jsx("p",{className:"text-xs text-foreground/80",children:"Hello! How can I help you today?"})}),i>=1&&e.jsx("div",{className:"bg-primary/10 rounded-2xl rounded-tr-md p-3 max-w-[85%] ml-auto animate-in slide-in-from-right-2 duration-300",children:e.jsxs("p",{className:"text-xs text-foreground",children:[l,e.jsx("span",{className:"animate-pulse",children:"|"})]})})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:[i>=2&&e.jsx("div",{className:"mb-2 animate-in slide-in-from-bottom-2 fade-in duration-500",children:e.jsxs("div",{className:"bg-gradient-to-r from-primary/15 to-primary/5 border border-primary/30 rounded-xl p-2.5 backdrop-blur-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[e.jsx(se,{className:"h-3.5 w-3.5 text-primary"}),e.jsx("span",{className:"text-[10px] font-semibold text-primary",children:"Enhanced prompt ready"}),e.jsx(L,{variant:"outline",className:"text-[8px] px-1 py-0 border-primary/30 text-primary ml-auto",children:(w=hs.find(o=>o.id===s))==null?void 0:w.name})]}),e.jsx("p",{className:"text-[9px] text-foreground/70 line-clamp-2 mb-2",children:b}),e.jsxs("div",{className:"flex gap-1.5",children:[e.jsxs(v,{size:"sm",className:"h-6 text-[9px] px-3 rounded-lg bg-primary hover:bg-primary/90",children:[e.jsx(oe,{className:"h-2.5 w-2.5 mr-1"}),"Use Enhanced"]}),e.jsx(v,{size:"sm",variant:"ghost",className:"h-6 text-[9px] px-2 rounded-lg text-muted-foreground",children:"Dismiss"})]})]})}),i>=3&&e.jsx("div",{className:"mb-2 animate-in fade-in duration-300",children:e.jsxs("div",{className:"flex items-center gap-1.5 justify-center",children:[e.jsx(oe,{className:"h-3 w-3 text-emerald-500"}),e.jsx("span",{className:"text-[9px] text-emerald-500 font-medium",children:"Prompt enhanced & pasted"})]})}),e.jsxs("div",{className:"bg-muted/60 border border-border/30 rounded-2xl px-4 py-2.5 flex items-center gap-2",children:[e.jsx("span",{className:"text-[11px] text-muted-foreground flex-1",children:i>=3?b.slice(0,50)+"...":i>=1?l:"Message"}),e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/20 flex items-center justify-center",children:e.jsx(ts,{className:"h-3 w-3 text-primary"})})]})]})]})}),e.jsx("div",{className:"flex justify-center gap-2 mt-4",children:["Type prompt","3s debounce","Review","Pasted!"].map((o,j)=>e.jsxs("div",{className:`flex items-center gap-1 transition-all duration-300 ${i===j?"opacity-100":"opacity-30"}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${i===j?"bg-primary":"bg-muted-foreground"}`}),e.jsx("span",{className:"text-[9px] text-muted-foreground",children:o})]},j))})]})}function Xt(){const[s,i]=h.useState(Rs()),[n,l]=h.useState(s.style),{isActive:t,activate:x,deactivate:A,toggle:b}=Ls(),w=(o,j)=>{const T={...s,[o]:j};i(T),Gs({[o]:j})};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-border/50 bg-gradient-to-br from-primary/5 via-background to-primary/10",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.02] bg-[size:20px_20px]"}),e.jsxs("div",{className:"relative grid lg:grid-cols-2 gap-8 p-6 sm:p-10",children:[e.jsxs("div",{className:"flex flex-col justify-center space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{variant:"secondary",className:"text-xs font-semibold bg-primary/10 text-primary border-primary/20",children:[e.jsx(ae,{className:"h-3 w-3 mr-1"})," Prompt Overlay Tool"]}),t&&e.jsx(L,{className:"text-xs font-semibold bg-emerald-500/20 text-emerald-400 border-emerald-500/30 animate-pulse",children:"â— Active"})]}),e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold tracking-tight text-foreground leading-tight",children:["Enhance every AI prompt,",e.jsx("br",{}),e.jsx("span",{className:"text-primary",children:"on every app."})]}),e.jsx("p",{className:"text-muted-foreground text-sm sm:text-base leading-relaxed max-w-lg",children:"A Grammarly-style floating overlay built right into PromptX. Activate it, type or paste any prompt, and get an AI-enhanced version in seconds â€” powered by Grok for 5â€“10Ã— better responses."})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Real-time enhancement","3s smart debounce","One-click copy","Privacy mode"].map(o=>e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground bg-muted/50 px-2.5 py-1 rounded-full border border-border/30",children:[e.jsx(oe,{className:"h-3 w-3 text-primary"}),o]},o))}),e.jsx("div",{className:"flex gap-3",children:t?e.jsxs(v,{onClick:A,size:"lg",variant:"outline",className:"gap-2.5 px-8 py-6 text-base font-bold border-red-500/30 text-red-400 hover:bg-red-500/10 hover:text-red-300 transition-all hover:scale-[1.02] active:scale-[0.98]",children:[e.jsx(he,{className:"h-5 w-5"}),"Deactivate Overlay"]}):e.jsxs(v,{onClick:x,size:"lg",className:"gap-2.5 px-8 py-6 text-base font-bold shadow-lg shadow-primary/25 hover:shadow-xl hover:shadow-primary/30 transition-all hover:scale-[1.02] active:scale-[0.98] bg-gradient-to-r from-primary to-primary/80",children:[e.jsx(he,{className:"h-5 w-5"}),"Activate Overlay"]})}),t&&e.jsx("div",{className:"animate-in slide-in-from-left-2 duration-300 bg-emerald-500/10 border border-emerald-500/20 rounded-xl px-4 py-3",children:e.jsxs("p",{className:"text-xs text-emerald-400 font-medium flex items-center gap-2",children:[e.jsx(se,{className:"h-3.5 w-3.5"}),"Overlay is active! Look for the floating PromptX widget on screen. Type or paste a prompt to enhance it instantly."]})})]}),e.jsx("div",{className:"hidden lg:flex items-center justify-center",children:e.jsx(Vt,{activeStyle:n})})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(ss,{className:"h-5 w-5 text-primary"}),"Works with every major AI app"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Fs.map(o=>e.jsx(_,{className:"border-border/30 bg-muted/20 hover:bg-muted/40 transition-all duration-300 group cursor-default",children:e.jsxs(R,{className:"flex items-center gap-3 p-4",children:[e.jsx("span",{className:"text-2xl",children:o.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:o.name}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Copy & enhance"})]})]})},o.name))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-primary"}),"Enhancement Styles"]}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-3",children:hs.map(o=>e.jsx(_,{className:`border-border/30 cursor-pointer transition-all duration-300 hover:shadow-lg group ${n===o.id?"ring-2 ring-primary/50 border-primary/30 bg-primary/5":"bg-muted/10 hover:bg-muted/30"}`,onClick:()=>{l(o.id),w("style",o.id)},children:e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-9 h-9 rounded-xl bg-gradient-to-br ${o.color} flex items-center justify-center text-lg`,children:o.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:o.name}),o.badge&&e.jsx(L,{variant:"secondary",className:"text-[9px] px-1.5 py-0 mt-0.5",children:o.badge})]})]}),n===o.id&&e.jsx("div",{className:"w-5 h-5 rounded-full bg-primary flex items-center justify-center",children:e.jsx(oe,{className:"h-3 w-3 text-primary-foreground"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:o.description})]})},o.id))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(jt,{className:"h-5 w-5 text-primary"}),"Overlay Settings"]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsx(_,{className:"border-border/30 bg-muted/10",children:e.jsxs(R,{className:"p-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-9 h-9 rounded-xl flex items-center justify-center transition-colors ${t?"bg-emerald-500/20":"bg-primary/10"}`,children:e.jsx(he,{className:`h-4 w-4 ${t?"text-emerald-400":"text-primary"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Overlay Active"}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:t?"Widget is floating on screen":"Click to activate the overlay"})]})]}),e.jsx(le,{checked:t,onCheckedChange:b})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-emerald-500/10 flex items-center justify-center",children:s.privacyMode?e.jsx(ht,{className:"h-4 w-4 text-emerald-500"}):e.jsx(ws,{className:"h-4 w-4 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Privacy Mode"}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"No cloud logging of prompts"})]})]}),e.jsx(le,{checked:s.privacyMode,onCheckedChange:o=>w("privacyMode",o)})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-amber-500/10 flex items-center justify-center",children:e.jsx(Ue,{className:"h-4 w-4 text-amber-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Debounce Timer"}),e.jsxs(L,{variant:"outline",className:"text-xs font-mono",children:[(s.debounceMs/1e3).toFixed(1),"s"]})]}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Wait time before auto-enhancing"})]})]}),e.jsx(nt,{value:[s.debounceMs],min:1e3,max:8e3,step:500,onValueChange:([o])=>w("debounceMs",o),className:"w-full"})]})]})}),e.jsx(_,{className:"border-border/30 bg-muted/10",children:e.jsxs(R,{className:"p-5",children:[e.jsxs("h4",{className:"text-sm font-semibold text-foreground flex items-center gap-2 mb-4",children:[e.jsx(ae,{className:"h-4 w-4 text-primary"})," Quick Start"]}),e.jsx("div",{className:"space-y-3",children:[{step:"1",text:'Click "Activate Overlay" above or toggle the switch on',icon:e.jsx(he,{className:"h-3.5 w-3.5"})},{step:"2",text:"A floating PromptX widget appears on your screen",icon:e.jsx(se,{className:"h-3.5 w-3.5"})},{step:"3",text:"Type or paste any prompt into the widget",icon:e.jsx(Ve,{className:"h-3.5 w-3.5"})},{step:"4",text:"Wait 3 seconds â€” Grok enhances it automatically",icon:e.jsx(Ue,{className:"h-3.5 w-3.5"})},{step:"5",text:'Click "Copy Enhanced" to use in any AI app',icon:e.jsx(ce,{className:"h-3.5 w-3.5"})}].map(o=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-[11px] font-bold text-primary shrink-0 mt-0.5",children:o.step}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"text-primary/60",children:o.icon}),e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:o.text})]})]},o.step))}),!t&&e.jsxs(v,{onClick:x,className:"w-full mt-4 gap-2 bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70",size:"sm",children:[e.jsx(he,{className:"h-4 w-4"})," Activate Now"]}),t&&e.jsx("div",{className:"mt-4 bg-emerald-500/10 border border-emerald-500/20 rounded-lg px-3 py-2 text-center",children:e.jsx("p",{className:"text-[11px] text-emerald-400 font-medium",children:"âœ“ Overlay is active and ready to use"})})]})})]})]}),e.jsxs(_,{className:"border-border/30 bg-muted/10",children:[e.jsx(J,{className:"pb-3",children:e.jsxs(te,{className:"text-lg flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5 text-primary"})," How It Works"]})}),e.jsx(R,{children:e.jsx("div",{className:"grid sm:grid-cols-4 gap-4",children:[{icon:e.jsx(he,{className:"h-6 w-6"}),title:"Activate",desc:"Turn on the overlay from the settings or the big activate button"},{icon:e.jsx(Ve,{className:"h-6 w-6"}),title:"Paste or Type",desc:"Enter any prompt into the floating widget"},{icon:e.jsx(se,{className:"h-6 w-6"}),title:"Enhance",desc:"3-second pause triggers AI enhancement via Grok"},{icon:e.jsx(ce,{className:"h-6 w-6"}),title:"Copy & Use",desc:"One click to copy the enhanced prompt to clipboard"}].map((o,j)=>e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-primary/10 flex items-center justify-center text-primary mx-auto",children:o.icon}),e.jsx("p",{className:"text-sm font-semibold text-foreground",children:o.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o.desc}),j<3&&e.jsx(Bs,{className:"h-4 w-4 text-muted-foreground/30 mx-auto hidden sm:block"})]},j))})})]}),e.jsx(_,{className:"border-border/30 bg-muted/10",children:e.jsx(R,{className:"p-5",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/10 flex items-center justify-center shrink-0",children:e.jsx(qe,{className:"h-5 w-5 text-emerald-500"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-foreground",children:"Privacy & Security"}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-x-6 gap-y-1.5",children:["Prompts processed in real-time, never stored","All enhancements via encrypted API","No data shared with third parties","Privacy mode disables all logging","Widget runs entirely in your browser","Open-source overlay component"].map((o,j)=>e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1.5",children:[e.jsx(oe,{className:"h-3 w-3 text-emerald-500 shrink-0"})," ",o]},j))})]})]})})})]})}const Jt=({userId:s,planAccess:i})=>{const[n,l]=h.useState([]),[t,x]=h.useState(!0),[A,b]=h.useState(""),[w,o]=h.useState("grid"),[j,T]=h.useState("my-agents"),[u,y]=h.useState(!1),[g,C]=h.useState(null),[S,m]=h.useState(!1),[I,O]=h.useState(null),{toast:D}=xe();Qe();const d=async()=>{try{const{data:a,error:c}=await ne.from("prompt_agents").select("*").eq("user_id",s).order("created_at",{ascending:!1});if(c)throw c;const E=(a||[]).map(P=>({...P,executions:Math.floor(Math.random()*1e3),avg_response_time:Math.random()*3e3+500,total_tokens:Math.floor(Math.random()*5e5),quality_score:Math.floor(Math.random()*20)+80}));l(E)}catch(a){console.error("Error fetching agents:",a),D({title:"Error",description:"Failed to load agents",variant:"destructive"})}finally{x(!1)}};h.useEffect(()=>{s&&d()},[s]);const r=()=>{y(!1),C(null),m(!1),d()},N=a=>{C(a),y(!0)},M=async a=>{try{const{error:c}=await ne.from("prompt_agents").delete().eq("id",a.id);if(c)throw c;D({title:"Agent Deleted",description:`${a.name} has been removed.`}),d()}catch{D({title:"Error",description:"Failed to delete agent",variant:"destructive"})}},z=async a=>{try{const{id:c,created_at:E,...P}=a,{error:G}=await ne.from("prompt_agents").insert([{...P,name:`${a.name} (Copy)`,user_id:s}]);if(G)throw G;D({title:"Agent Duplicated",description:`Copy of ${a.name} created.`}),d()}catch{D({title:"Error",description:"Failed to duplicate agent",variant:"destructive"})}},F=a=>{O(a)},k=a=>{C({id:"",name:a.name,description:a.description,system_prompt:a.systemPrompt,category:a.category,model:a.model,tags:a.tags,user_id:s,created_at:""}),m(!1)},p=n.filter(a=>{var c,E;return a.name.toLowerCase().includes(A.toLowerCase())||((c=a.description)==null?void 0:c.toLowerCase().includes(A.toLowerCase()))||((E=a.tags)==null?void 0:E.some(P=>P.toLowerCase().includes(A.toLowerCase())))}),f=(i==null?void 0:i.planType)==="pro"||(i==null?void 0:i.planType)==="enterprise";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ps,{value:j,onValueChange:T,className:"w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[e.jsxs(us,{className:"bg-transparent border-b border-border/50 p-0 h-auto rounded-none w-full sm:w-auto flex-wrap justify-start",children:[e.jsxs(V,{value:"my-agents",className:"gap-2.5 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:text-foreground data-[state=active]:shadow-none px-4 py-3 transition-all duration-300",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"My Agents"}),e.jsx("span",{className:"sm:hidden font-medium",children:"Agents"}),e.jsx(L,{variant:"secondary",className:"ml-1.5 text-xs font-semibold px-2",children:n.length})]}),e.jsxs(V,{value:"store",className:"gap-2.5 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:text-foreground data-[state=active]:shadow-none px-4 py-3 transition-all duration-300",children:[e.jsx(Hs,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Agent Store"}),e.jsx("span",{className:"sm:hidden font-medium",children:"Store"})]}),e.jsxs(V,{value:"orchestration",className:"gap-2.5 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:text-foreground data-[state=active]:shadow-none px-4 py-3 transition-all duration-300",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Orchestration"}),e.jsx("span",{className:"sm:hidden font-medium",children:"Chain"})]}),e.jsxs(V,{value:"metrics",className:"gap-2.5 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:text-foreground data-[state=active]:shadow-none px-4 py-3 transition-all duration-300",children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Metrics"}),e.jsx("span",{className:"sm:hidden font-medium",children:"Stats"})]}),e.jsxs(V,{value:"memory",className:"gap-2.5 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:text-foreground data-[state=active]:shadow-none px-4 py-3 transition-all duration-300",children:[e.jsx(Fe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Memory"})]}),e.jsxs(V,{value:"tools",className:"gap-2.5 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:text-foreground data-[state=active]:shadow-none px-4 py-3 transition-all duration-300",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Tools"})]}),e.jsxs(V,{value:"desktop",className:"gap-2.5 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:text-foreground data-[state=active]:shadow-none px-4 py-3 transition-all duration-300",children:[e.jsx(Xe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Desktop App"}),e.jsx("span",{className:"sm:hidden font-medium",children:"Desktop"})]}),e.jsxs(V,{value:"mobile-overlay",className:"gap-2.5 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:text-foreground data-[state=active]:shadow-none px-4 py-3 transition-all duration-300",children:[e.jsx(ft,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Mobile Overlay"}),e.jsx("span",{className:"sm:hidden font-medium",children:"Overlay"}),e.jsx(L,{variant:"secondary",className:"ml-1 text-[9px] px-1.5 py-0 bg-primary/10 text-primary border-primary/20",children:"New"})]})]}),j==="my-agents"&&e.jsxs(ye,{open:u,onOpenChange:a=>{y(a),a||(C(null),m(!1))},children:[e.jsx(He,{asChild:!0,children:e.jsxs(v,{className:"gap-2.5 bg-primary hover:bg-primary/90 shadow-lg hover:shadow-xl transition-all duration-300 font-semibold px-6",children:[e.jsx(pe,{className:"h-4 w-4"}),"Create Agent"]})}),e.jsxs(Ne,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ve,{children:[e.jsx(be,{children:g!=null&&g.id?"Edit Agent":S?"Choose Template":"Create New Agent"}),e.jsx(De,{children:S?"Start with a pre-built template or create from scratch":"Define your agent's capabilities and behavior"})]}),!(g!=null&&g.id)&&!S&&e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs(v,{variant:"outline",className:"flex-1 gap-2",onClick:()=>m(!0),children:[e.jsx(se,{className:"h-4 w-4"}),"Use Template"]}),e.jsxs(v,{variant:"outline",className:"flex-1 gap-2",onClick:()=>C({id:"",name:"",description:"",system_prompt:"",category:"Writing",user_id:s,created_at:""}),children:[e.jsx(pe,{className:"h-4 w-4"}),"Start Fresh"]})]}),S?e.jsx(rt,{onSelectTemplate:k}):g?e.jsx(Ut,{userId:s,agent:g,onSave:r}):null]})]})]}),e.jsx(X,{value:"my-agents",className:"mt-0",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(es,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Q,{placeholder:"Search your agents...",value:A,onChange:a=>b(a.target.value),className:"pl-11 h-11 bg-muted/30 border-border/50 focus:border-primary/50 transition-all duration-300"})]}),e.jsxs("div",{className:"flex gap-2 border border-border/50 rounded-lg p-1.5 bg-muted/20",children:[e.jsx(v,{variant:w==="grid"?"default":"ghost",size:"icon",onClick:()=>o("grid"),className:"h-8 w-8",children:e.jsx(pt,{className:"h-4 w-4"})}),e.jsx(v,{variant:w==="list"?"default":"ghost",size:"icon",onClick:()=>o("list"),className:"h-8 w-8",children:e.jsx(ut,{className:"h-4 w-4"})})]})]}),t?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(a=>e.jsxs(_,{className:"animate-pulse",children:[e.jsxs(J,{className:"space-y-2",children:[e.jsx("div",{className:"h-12 w-12 bg-muted rounded-xl"}),e.jsx("div",{className:"h-5 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}),e.jsx(R,{children:e.jsx("div",{className:"h-16 bg-muted rounded"})})]},a))}):p.length>0?e.jsx("div",{className:$("gap-6",w==="grid"?"grid md:grid-cols-2 lg:grid-cols-3":"flex flex-col"),children:p.map(a=>e.jsx(wt,{agent:a,variant:w==="list"?"compact":"default",showMetrics:!0,onChat:F,onEdit:N,onDelete:M,onDuplicate:z},a.id))}):e.jsx(_,{className:"border-dashed border-2 border-primary/30 bg-primary/5",children:e.jsxs(R,{className:"py-12 text-center",children:[e.jsx(K,{className:"h-16 w-16 mx-auto mb-4 text-primary/50"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Agents Yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Create your first AI agent to get started"}),e.jsxs(v,{onClick:()=>y(!0),className:"gap-2",children:[e.jsx(pe,{className:"h-4 w-4"}),"Create Your First Agent"]})]})})]})}),e.jsx(X,{value:"store",className:"mt-0",children:e.jsx(Ot,{userId:s,onAgentSelect:F})}),e.jsx(X,{value:"orchestration",className:"mt-0",children:e.jsx(Gt,{userId:s,agents:n})}),e.jsx(X,{value:"metrics",className:"mt-0",children:e.jsx(Dt,{userId:s,agents:n})}),e.jsx(X,{value:"memory",className:"mt-0",children:e.jsx(_t,{userId:s})}),e.jsx(X,{value:"tools",className:"mt-0",children:e.jsx(Rt,{userId:s,isPro:f})}),e.jsx(X,{value:"desktop",className:"mt-0",children:e.jsx(Kt,{})}),e.jsx(X,{value:"mobile-overlay",className:"mt-0",children:e.jsx(Xt,{})})]}),I&&e.jsx($t,{agent:I,open:!!I,onOpenChange:a=>!a&&O(null)})]})},Xa=()=>{const s=Qe(),[i,n]=h.useState(null),[l,t]=h.useState(!0),x=lt(i==null?void 0:i.id);return h.useEffect(()=>{const{data:{subscription:A}}=ne.auth.onAuthStateChange((b,w)=>{n((w==null?void 0:w.user)??null),w||s("/auth")});return ne.auth.getSession().then(({data:{session:b}})=>{n((b==null?void 0:b.user)??null),b||s("/auth"),t(!1)}),()=>A.unsubscribe()},[s]),l?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx("div",{className:"animate-pulse-subtle",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary/20 border-t-primary rounded-full animate-spin"})})}):e.jsx(Ks,{user:i,showHeader:!1,children:e.jsx("div",{className:"w-full min-h-screen bg-background",children:e.jsxs("div",{className:"container-responsive mx-auto max-w-7xl py-8 sm:py-12 md:py-16 lg:py-20",children:[e.jsx("div",{className:"mb-10 space-y-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative p-4 rounded-2xl bg-gradient-to-br from-primary/10 via-primary/5 to-transparent border border-primary/10 shadow-lg",children:[e.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-primary/5 to-transparent opacity-50"}),e.jsx(se,{className:"relative h-10 w-10 text-primary"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-foreground tracking-tight leading-none",children:"AI Agent Hub"}),e.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mt-2 font-medium",children:"Build, orchestrate, and monetize intelligent agents"})]})]})}),!x.isLoading&&x.planType==="free"&&e.jsxs("div",{className:"relative mb-8 overflow-hidden rounded-2xl border border-border/50 bg-gradient-to-br from-muted/30 via-background/50 to-muted/20 backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.02] bg-[size:20px_20px]"}),e.jsx("div",{className:"relative p-6 sm:p-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10 border border-primary/20",children:e.jsx(ot,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("h3",{className:"text-lg font-semibold tracking-tight",children:"Unlock Full Agent Power"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-2xl leading-relaxed",children:"Free plan has limited features. Upgrade to Pro for unlimited agents, orchestration, advanced tools, and Agent Store access."})]})]}),e.jsxs(v,{onClick:()=>s("/pricing"),className:"gap-2 bg-primary text-primary-foreground hover:bg-primary/90 shadow-lg hover:shadow-xl transition-all duration-300 shrink-0",children:[e.jsx(ie,{className:"h-4 w-4"}),"Upgrade to Pro"]})]})})]}),e.jsx("div",{className:"w-full",children:e.jsx(Jt,{userId:(i==null?void 0:i.id)||"",planAccess:x})})]})})})};export{Xa as default};
