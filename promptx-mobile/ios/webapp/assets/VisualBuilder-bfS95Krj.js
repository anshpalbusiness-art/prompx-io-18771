import{r as u,n as C,x as E,j as e,h as B,i as _,k as P,l as A,m as S,B as g,a5 as U,X as V}from"./index-C2MjUc6j.js";import{s as f}from"./index-z1pI4DUj.js";import{L as I}from"./Layout-lstxxF2Q.js";import{I as $}from"./index-C0NKCsYR.js";import{B as z}from"./badge-BmD5Ofur.js";import{L as N}from"./lock-DoPTFIOb.js";import{A as F}from"./arrow-right-GxPfL1wI.js";import{C as y}from"./crown-D3TlBkXs.js";import{Z as G}from"./index-BOT--vBY.js";import{P as O}from"./plus-XtvXWcDu.js";function q({children:m,feature:n,requiredPlan:a="pro",fallback:i,showUpgradePrompt:x=!0}){const[p,o]=u.useState(null),[c,b]=u.useState(null),[j,w]=u.useState(!0),h=C(),{toast:t}=E();u.useEffect(()=>{r()},[]);const r=async()=>{try{const{data:{user:l}}=await f.auth.getUser();if(o(l),l){const{data:v}=await f.from("user_subscriptions").select("plan_type, status, end_date").eq("user_id",l.id).eq("status","active").single();b(v)}}catch(l){console.error("Error checking user access:",l)}finally{w(!1)}},s=()=>{if(!p||!c)return!1;const l={free:0,pro:1,premium:2,enterprise:3},v=l[c.plan_type]||0,L=l[a];return v>=L},d=()=>{if(!p){t({title:"Sign in required",description:"Please sign in to upgrade your plan",variant:"destructive"}),h("/auth");return}h("/pricing")},D=l=>{switch(l){case"pro":return e.jsx(G,{className:"w-5 h-5 text-white"});case"premium":return e.jsx(y,{className:"w-5 h-5 text-white"});case"enterprise":return e.jsx(y,{className:"w-5 h-5 text-white"});default:return e.jsx(N,{className:"w-5 h-5 text-white"})}};return j?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-white/20 border-t-white"})}):s()?e.jsx(e.Fragment,{children:m}):i?e.jsx(e.Fragment,{children:i}):x?e.jsx("div",{className:"flex items-center justify-center p-4 sm:p-8",children:e.jsxs(B,{className:"max-w-md bg-gradient-to-br from-black to-zinc-950 border border-white/[0.08] backdrop-blur-xl rounded-2xl overflow-hidden smooth-card shadow-[0_20px_80px_rgba(255,255,255,0.03)]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/[0.02] to-transparent pointer-events-none"}),e.jsxs(_,{className:"text-center pb-6 pt-8 px-6 sm:px-8 relative",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-white/[0.15] to-white/[0.05] flex items-center justify-center backdrop-blur-sm border border-white/[0.1] shadow-[0_8px_32px_rgba(255,255,255,0.08)]",children:D(a)})}),e.jsxs(P,{className:"text-white flex items-center justify-center gap-3 text-2xl font-light tracking-wide mb-3",children:[e.jsx(N,{className:"w-5 h-5"}),"Premium Feature"]}),e.jsxs(A,{className:"text-zinc-400 font-light text-base leading-relaxed",children:[n," requires a ",a," plan or higher"]})]}),e.jsxs(S,{className:"text-center space-y-6 px-6 sm:px-8 pb-8 relative",children:[e.jsxs(z,{className:"bg-gradient-to-r from-white to-zinc-100 text-black font-bold capitalize px-4 py-2 rounded-lg shadow-lg",children:[a," Plan Required"]}),e.jsx("p",{className:"text-zinc-300 text-sm font-light leading-relaxed",children:"Upgrade your plan to unlock this feature and many more advanced capabilities."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(g,{onClick:d,className:"w-full h-12 bg-gradient-to-r from-white to-zinc-100 text-black hover:from-zinc-50 hover:to-white font-bold shadow-[0_4px_20px_rgba(255,255,255,0.2)] hover:shadow-[0_8px_32px_rgba(255,255,255,0.35)] transition-all duration-300 rounded-xl smooth-button",children:["Upgrade to ",a,e.jsx(F,{className:"w-4 h-4 ml-2"})]}),e.jsx(g,{variant:"ghost",onClick:()=>h("/pricing"),className:"w-full h-11 text-zinc-400 hover:text-white hover:bg-white/[0.05] border border-white/[0.05] hover:border-white/[0.1] transition-all duration-300 rounded-xl font-medium smooth-button",children:"View All Plans"})]})]})]})}):null}const k=[{type:"context",label:"Context",color:"bg-blue-100 dark:bg-blue-900"},{type:"instruction",label:"Instruction",color:"bg-green-100 dark:bg-green-900"},{type:"constraint",label:"Constraint",color:"bg-yellow-100 dark:bg-yellow-900"},{type:"output",label:"Output Format",color:"bg-purple-100 dark:bg-purple-900"}],H=({onPromptGenerated:m})=>{const[n,a]=u.useState([]),[i,x]=u.useState(null),p=(t,r)=>{const s={id:`${t}-${Date.now()}`,type:t,label:r,content:""};a([...n,s])},o=t=>{a(n.filter(r=>r.id!==t))},c=(t,r)=>{a(n.map(s=>s.id===t?{...s,content:r}:s))},b=t=>{x(t)},j=(t,r)=>{if(t.preventDefault(),i===null||i===r)return;const s=[...n],d=s[i];s.splice(i,1),s.splice(r,0,d),a(s),x(r)},w=()=>{x(null)},h=()=>{const t=n.filter(r=>r.content.trim()).map(r=>`${r.label}:
${r.content}`).join(`

`);m(t)};return e.jsx(q,{feature:"Visual Prompt Builder",requiredPlan:"pro",children:e.jsxs(B,{children:[e.jsx(_,{children:e.jsxs(P,{className:"flex items-center justify-between",children:["Visual Prompt Builder",e.jsx(g,{onClick:h,disabled:n.length===0,size:"sm",children:"Generate Prompt"})]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(t=>e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>p(t.type,t.label),children:[e.jsx(O,{className:"h-4 w-4 mr-1"}),t.label]},t.type))}),e.jsxs("div",{className:"space-y-3",children:[n.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Add blocks above to start building your prompt"}),n.map((t,r)=>{const s=k.find(d=>d.type===t.type);return e.jsxs("div",{draggable:!0,onDragStart:()=>b(r),onDragOver:d=>j(d,r),onDragEnd:w,className:`p-4 border rounded-lg ${s==null?void 0:s.color} cursor-move`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(z,{variant:"secondary",children:t.label})]}),e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>o(t.id),children:e.jsx(V,{className:"h-4 w-4"})})]}),e.jsx($,{placeholder:`Enter ${t.label.toLowerCase()}...`,value:t.content,onChange:d=>c(t.id,d.target.value),className:"bg-background"})]},t.id)})]})]})]})})},ee=()=>{const m=C(),[n,a]=u.useState(null),[i,x]=u.useState(!0);return u.useEffect(()=>{const{data:{subscription:p}}=f.auth.onAuthStateChange((o,c)=>{a((c==null?void 0:c.user)??null),c||m("/auth")});return f.auth.getSession().then(({data:{session:o}})=>{a((o==null?void 0:o.user)??null),o||m("/auth"),x(!1)}),()=>p.unsubscribe()},[m]),i?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx("div",{className:"animate-pulse-subtle",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary/20 border-t-primary rounded-full animate-spin"})})}):e.jsx(I,{user:n,showHeader:!1,children:e.jsx("div",{className:"w-full min-h-screen bg-gradient-to-b from-background via-background to-muted/20",children:e.jsxs("div",{className:"container-responsive mx-auto max-w-6xl py-8 sm:py-12 md:py-16 lg:py-20",children:[e.jsxs("div",{className:"mb-6 sm:mb-8 md:mb-10 lg:mb-12 space-y-2 sm:space-y-3 md:space-y-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-foreground leading-tight",children:"Visual Prompt Builder"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl text-muted-foreground max-w-2xl leading-relaxed",children:"Build complex prompts with an intuitive visual interface"})]}),e.jsx("div",{className:"w-full",children:e.jsx(H,{onPromptGenerated:()=>{}})})]})})})};export{ee as default};
