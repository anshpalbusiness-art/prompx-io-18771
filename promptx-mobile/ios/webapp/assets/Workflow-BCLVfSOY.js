import{c as B,x as Z,r as d,j as e,B as i,h as y,S as O,L as ee,n as te}from"./index-C2MjUc6j.js";import{s as N}from"./index-z1pI4DUj.js";import{f as ae,L as re}from"./Layout-lstxxF2Q.js";import{I as z}from"./index-C0NKCsYR.js";import{L as p}from"./label-CPXGueWk.js";import{T as S}from"./textarea-BKVa-xUV.js";import{B as se}from"./badge-BmD5Ofur.js";import{S as oe,a as ie,b as le,c as ne,d as me}from"./select-JOWFLGTk.js";import{S as U}from"./slider-DOuiAmCR.js";import{A as de,a as ce,b as pe}from"./alert--iGv8D_7.js";import{L as ue}from"./lock-DoPTFIOb.js";import{C as he}from"./crown-D3TlBkXs.js";import{S as ge}from"./save-BCb4Y_2r.js";import{D as fe}from"./download-HMPM07Ay.js";import{T as xe}from"./trash-2-DBuHC0nM.js";import{A as ve}from"./arrow-right-GxPfL1wI.js";import{P as we}from"./plus-XtvXWcDu.js";import{P as ke}from"./play-BdfUVeBd.js";import"./index-BOT--vBY.js";import"./index-BdQq_4o_.js";import"./index-CdTD_yct.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=B("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=B("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Ne=({onExecute:v,isExecuting:u,user:c,planAccess:s})=>{const{toast:o}=Z(),[l,n]=d.useState([{id:"1",name:"Step 1",prompt:"",model:"google/gemini-2.5-flash",temperature:.7,maxTokens:2e3}]),[h,F]=d.useState([]),[I,R]=d.useState({}),[w,k]=d.useState(""),[C,j]=d.useState(""),[g,L]=d.useState(""),[P,E]=d.useState(!1),[T,A]=d.useState(""),W=(s==null?void 0:s.canAccessWorkflows())!==!1;d.useEffect(()=>{c&&D()},[c]);const D=async()=>{if(!c)return;const{data:t,error:a}=await N.from("saved_workflows").select("*").order("updated_at",{ascending:!1});if(a){console.error("Error loading workflows:",a);return}F(t||[])},M=()=>{const t={id:Date.now().toString(),name:`Step ${l.length+1}`,prompt:"",model:"google/gemini-2.5-flash",temperature:.7,maxTokens:2e3};n([...l,t])},H=t=>{if(l.length===1){o({title:"Cannot remove",description:"Workflow must have at least one step",variant:"destructive"});return}n(l.filter(a=>a.id!==t))},f=(t,a,r)=>{n(l.map(m=>m.id===t?{...m,[a]:r}:m))},V=t=>{R(a=>({...a,[t]:!a[t]}))},$=()=>{if(!W){s==null||s.showUpgradeMessage("Workflows"),s==null||s.redirectToPricing();return}if(!T.trim()){o({title:"Input required",description:"Please provide input for the workflow to process",variant:"destructive"});return}if(l.filter(a=>!a.prompt.trim()).length>0){o({title:"Invalid workflow",description:"All steps must have a prompt",variant:"destructive"});return}v(l,T)},_=async()=>{if(!c){o({title:"Login required",description:"Please login to save workflows",variant:"destructive"});return}if(!w.trim()){o({title:"Name required",description:"Please provide a name for your workflow",variant:"destructive"});return}const{error:t}=await N.from("saved_workflows").insert([{user_id:c.id,name:w,description:C,steps:l}]);if(t){o({title:"Save failed",description:t.message,variant:"destructive"});return}o({title:"Workflow saved",description:"Your workflow has been saved successfully"}),k(""),j(""),await D()},q=t=>{n(t.steps),k(t.name),j(t.description||""),o({title:"Workflow loaded",description:t.name})},J=()=>{const t=JSON.stringify({name:w,description:C,steps:l},null,2),a=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(a),m=document.createElement("a");m.href=r,m.download=`${w||"workflow"}-${Date.now()}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(r),o({title:"Workflow exported",description:"Downloaded as JSON file"})},Q=t=>{var m;const a=(m=t.target.files)==null?void 0:m[0];if(!a)return;const r=new FileReader;r.onload=X=>{var G;try{const b=JSON.parse((G=X.target)==null?void 0:G.result);n(b.steps),k(b.name||""),j(b.description||""),o({title:"Workflow imported",description:"Successfully loaded from file"})}catch{o({title:"Import failed",description:"Invalid workflow file",variant:"destructive"})}},r.readAsText(a)},Y=async()=>{if(!W){s==null||s.showUpgradeMessage("AI Workflow Generation"),s==null||s.redirectToPricing();return}if(!g.trim()){o({title:"Input required",description:"Please describe what you want to accomplish",variant:"destructive"});return}E(!0);try{const t=await N.functions.invoke("execute-claude",{body:{prompt:`Create a multi-step workflow for: ${g}

Generate a workflow with 3-5 steps, each with a name, prompt, and purpose.`,model:"claude-sonnet-4-5",temperature:.7,maxTokens:4e3}});if(t.error)throw t.error;const a=[{id:"1",name:"Step 1",prompt:t.data.result.split(`
`)[0]||g,model:"google/gemini-2.5-flash",temperature:.7,maxTokens:2e3},{id:"2",name:"Step 2",prompt:"Process the result from previous step",model:"google/gemini-2.5-flash",temperature:.7,maxTokens:2e3},{id:"3",name:"Step 3",prompt:"Finalize and output results",model:"google/gemini-2.5-flash",temperature:.7,maxTokens:2e3}];n(a),k(g.substring(0,50)),j("AI-generated workflow"),o({title:"ðŸš€ Workflow Generated!",description:`Created ${a.length} steps with Claude 4 Sonnet`}),L("")}catch(t){console.error("Error generating workflow:",t),o({title:"Generation failed",description:t.message||"Failed to generate workflow",variant:"destructive"})}finally{E(!1)}},x=t=>{const a={"content-creation":[{id:"1",name:"Research",prompt:"Research the topic: {{input}} and provide key facts and insights",model:"google/gemini-2.5-flash",temperature:.7,maxTokens:2e3},{id:"2",name:"Outline",prompt:"Create a detailed outline based on this research: {{previous}}",model:"google/gemini-2.5-flash",temperature:.5,maxTokens:1500},{id:"3",name:"Write",prompt:"Write a comprehensive article following this outline: {{previous}}",model:"google/gemini-2.5-flash",temperature:.8,maxTokens:3e3},{id:"4",name:"Polish",prompt:"Polish and refine this article for better flow and engagement: {{previous}}",model:"google/gemini-2.5-flash",temperature:.6,maxTokens:3e3}],"social-media":[{id:"1",name:"Summarize",prompt:"Summarize this content in key points: {{input}}",model:"google/gemini-2.5-flash",temperature:.5,maxTokens:1e3},{id:"2",name:"Twitter Thread",prompt:"Create an engaging Twitter thread from these points: {{previous}}",model:"google/gemini-2.5-flash",temperature:.9,maxTokens:1500},{id:"3",name:"Hashtags",prompt:"Generate relevant hashtags for this thread: {{previous}}",model:"google/gemini-2.5-flash",temperature:.8,maxTokens:500}],analysis:[{id:"1",name:"Analyze",prompt:"Analyze this data/content: {{input}} and identify key patterns",model:"google/gemini-2.5-flash",temperature:.3,maxTokens:2e3},{id:"2",name:"Insights",prompt:"Extract actionable insights from this analysis: {{previous}}",model:"google/gemini-2.5-flash",temperature:.4,maxTokens:1500},{id:"3",name:"Report",prompt:"Create a professional report with recommendations: {{previous}}",model:"google/gemini-2.5-flash",temperature:.5,maxTokens:2500}],"code-review":[{id:"1",name:"Analyze Code",prompt:"Analyze this code: {{input}} and identify issues, bugs, and improvements",model:"google/gemini-2.5-flash",temperature:.2,maxTokens:2e3},{id:"2",name:"Security Audit",prompt:"Check for security vulnerabilities in: {{previous}}",model:"google/gemini-2.5-flash",temperature:.1,maxTokens:1500},{id:"3",name:"Optimization",prompt:"Suggest performance optimizations for: {{previous}}",model:"google/gemini-2.5-flash",temperature:.3,maxTokens:2e3},{id:"4",name:"Documentation",prompt:"Generate comprehensive documentation for: {{input}}",model:"google/gemini-2.5-flash",temperature:.4,maxTokens:2500}],"creative-writing":[{id:"1",name:"Brainstorm",prompt:"Brainstorm creative ideas for: {{input}}",model:"google/gemini-2.5-flash",temperature:.9,maxTokens:1500},{id:"2",name:"Character Development",prompt:"Develop characters based on: {{previous}}",model:"google/gemini-2.5-flash",temperature:.8,maxTokens:2e3},{id:"3",name:"Plot Outline",prompt:"Create a plot outline using: {{previous}}",model:"google/gemini-2.5-flash",temperature:.7,maxTokens:2e3},{id:"4",name:"Write Scene",prompt:"Write an engaging opening scene: {{previous}}",model:"google/gemini-2.5-flash",temperature:.85,maxTokens:3e3}],"email-campaign":[{id:"1",name:"Audience Analysis",prompt:"Analyze target audience for: {{input}}",model:"google/gemini-2.5-flash",temperature:.5,maxTokens:1500},{id:"2",name:"Subject Lines",prompt:"Generate 10 compelling subject lines for: {{previous}}",model:"google/gemini-2.5-flash",temperature:.8,maxTokens:500},{id:"3",name:"Email Body",prompt:"Write persuasive email body using: {{previous}}",model:"google/gemini-2.5-flash",temperature:.7,maxTokens:2e3},{id:"4",name:"CTA Optimization",prompt:"Create multiple CTA variations for: {{previous}}",model:"google/gemini-2.5-flash",temperature:.6,maxTokens:800}]};a[t]&&(n(a[t]),o({title:"Template loaded",description:`${t.replace("-"," ")} workflow loaded successfully`}))},K=[{value:"google/gemini-2.5-flash",label:"Gemini 2.5 Flash (Fast)"},{value:"google/gemini-2.5-pro",label:"Gemini 2.5 Pro (Powerful)"},{value:"google/gemini-2.5-flash-lite",label:"Gemini 2.5 Flash Lite (Quick)"}];return e.jsxs("div",{className:"space-y-6",children:[!W&&e.jsxs(de,{className:"border-destructive/50 bg-destructive/5",children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx(ce,{children:"Workflows Not Available"}),e.jsxs(pe,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Workflows are only available on Pro, Team, and Enterprise plans. Upgrade to unlock multi-step AI workflows."}),e.jsxs(i,{size:"sm",onClick:()=>s==null?void 0:s.redirectToPricing(),className:"ml-4",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Upgrade Now"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI Workflow Builder"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Describe your goal and we'll create a multi-agent workflow automatically"})]}),e.jsx(y,{className:"p-4 bg-gradient-to-r from-primary/5 to-primary/10 border-primary/20",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(p,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 text-primary"}),"What do you want to accomplish?"]}),e.jsx(S,{value:g,onChange:t=>L(t.target.value),placeholder:`Example: I want to launch a new course in AI

The system will automatically create:
â€¢ Research agent (market trends)
â€¢ Copywriting agent (sales page)
â€¢ Social media agent (promotion posts)
â€¢ Ad agent (Facebook/Google ads)`,rows:4,className:"resize-none"}),e.jsx(i,{onClick:Y,disabled:P||!g.trim(),className:"w-full",children:P?e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating Workflow..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Generate Multi-Agent Workflow"]})})]})})]}),e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Or use a template"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Quick start with pre-built workflows"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>x("content-creation"),children:"Content"}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>x("social-media"),children:"Social"}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>x("analysis"),children:"Analysis"}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>x("code-review"),children:"Code Review"}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>x("creative-writing"),children:"Creative"}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>x("email-campaign"),children:"Email"})]})]}),c&&h.length>0&&e.jsxs(y,{className:"p-4",children:[e.jsx(p,{className:"text-sm font-medium mb-2 block",children:"Saved Workflows"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:h.map(t=>e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>q(t),children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),t.name]},t.id))})]}),c&&e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(p,{className:"text-sm",children:"Workflow Name"}),e.jsx(z,{value:w,onChange:t=>k(t.target.value),placeholder:"My workflow"})]}),e.jsxs("div",{children:[e.jsx(p,{className:"text-sm",children:"Description (optional)"}),e.jsx(z,{value:C,onChange:t=>j(t.target.value),placeholder:"What does this workflow do?"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:_,disabled:u,children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Save Workflow"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:J,disabled:u,children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>{var t;return(t=document.getElementById("import-workflow"))==null?void 0:t.click()},disabled:u,children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Import"]}),e.jsx("input",{id:"import-workflow",type:"file",accept:".json",onChange:Q,className:"hidden"})]})]})}),e.jsx("div",{className:"space-y-4",children:l.map((t,a)=>e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{variant:"secondary",children:a+1}),e.jsx(z,{value:t.name,onChange:r=>f(t.id,"name",r.target.value),className:"w-40",placeholder:"Step name"})]}),e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>H(t.id),disabled:l.length===1,children:e.jsx(xe,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Prompt"}),e.jsx(S,{value:t.prompt,onChange:r=>f(t.id,"prompt",r.target.value),placeholder:"Use {{input}} for initial input or {{previous}} for previous step output",rows:3}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Variables: ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"{{input}}"})," (your input), ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"{{previous}}"})," (previous step result)"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(p,{className:"text-sm",children:"Model"}),e.jsxs(i,{variant:"ghost",size:"sm",onClick:()=>V(t.id),children:[e.jsx(ae,{className:"h-4 w-4 mr-1"}),I[t.id]?"Hide":"Show"," Advanced"]})]}),e.jsxs(oe,{value:t.model||"google/gemini-2.5-flash",onValueChange:r=>f(t.id,"model",r),children:[e.jsx(ie,{children:e.jsx(le,{})}),e.jsx(ne,{children:K.map(r=>e.jsx(me,{value:r.value,children:r.label},r.value))})]})]}),I[t.id]&&e.jsxs("div",{className:"space-y-3 border-t pt-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{className:"text-sm",children:["Temperature: ",t.temperature||.7]}),e.jsx(U,{value:[t.temperature||.7],onValueChange:r=>f(t.id,"temperature",r[0]),min:0,max:1,step:.1}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Lower = more focused, Higher = more creative"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{className:"text-sm",children:["Max Tokens: ",t.maxTokens||2e3]}),e.jsx(U,{value:[t.maxTokens||2e3],onValueChange:r=>f(t.id,"maxTokens",r[0]),min:500,max:4e3,step:100}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum length of the response"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{className:"text-sm",children:"System Prompt (optional)"}),e.jsx(S,{value:t.systemPrompt||"",onChange:r=>f(t.id,"systemPrompt",r.target.value),placeholder:"Define the AI's behavior for this step...",rows:2})]})]}),a<l.length-1&&e.jsx("div",{className:"flex justify-center",children:e.jsx(ve,{className:"h-4 w-4 text-muted-foreground"})})]})},t.id))}),e.jsx(y,{className:"p-4 border-primary/30 bg-primary/5",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Workflow Input"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["This input will be used as the starting point for your workflow. Use ","{{input}}"," in your prompts to reference this value."]}),e.jsx(S,{value:T,onChange:t=>A(t.target.value),placeholder:"Enter the data or context for your workflow to process...",rows:3,className:"resize-none"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:"outline",onClick:M,disabled:u,children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Add Step"]}),e.jsxs(i,{onClick:$,disabled:u,className:"flex-1",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),u?"Executing Workflow...":"Execute Workflow"]})]})]})},$e=()=>{const v=te(),[u,c]=d.useState(null),[s,o]=d.useState(!0);return d.useEffect(()=>{const{data:{subscription:l}}=N.auth.onAuthStateChange((n,h)=>{c((h==null?void 0:h.user)??null),h||v("/auth")});return N.auth.getSession().then(({data:{session:n}})=>{c((n==null?void 0:n.user)??null),n||v("/auth"),o(!1)}),()=>l.unsubscribe()},[v]),s?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx("div",{className:"animate-pulse-subtle",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary/20 border-t-primary rounded-full animate-spin"})})}):e.jsx(re,{user:u,showHeader:!1,children:e.jsx("div",{className:"w-full min-h-screen bg-gradient-to-b from-background via-background to-muted/20",children:e.jsxs("div",{className:"container-responsive mx-auto max-w-6xl py-8 sm:py-12 md:py-16 lg:py-20",children:[e.jsxs("div",{className:"mb-6 sm:mb-8 md:mb-10 lg:mb-12 space-y-2 sm:space-y-3 md:space-y-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-foreground leading-tight",children:"Workflow Builder"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl text-muted-foreground max-w-2xl leading-relaxed",children:"Create automated workflows with multiple prompt steps"})]}),e.jsx("div",{className:"w-full",children:e.jsx(Ne,{user:u,onExecute:()=>{},isExecuting:!1})})]})})})};export{$e as default};
